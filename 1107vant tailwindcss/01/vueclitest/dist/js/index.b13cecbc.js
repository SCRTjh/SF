(function(){var e={9903:function(e,t,o){"use strict";var a=o(9242),s=o(3396);function n(e,t,o,a,n,i){const l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(l,null,{default:(0,s.w5)((({Component:e})=>[((0,s.wg)(),(0,s.j4)(s.Ob,{include:n.keepAliveList},[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))],1032,["include"]))])),_:1})}const i=["Home","ChooseFood","Order","Category","My"];var l=i,r={name:"App",data(){return{keepAliveList:l}}},d=o(89);const u=(0,d.Z)(r,[["render",n]]);var p=u,c=o(2483),m=o(65),g=o(2415),f=o(680),h=(0,m.MT)({state:{loginUserInfo:null,token:null},getters:{loginUserInfo(e){return e.loginUserInfo},token(e){return e.token}},mutations:{setLoginUserInfo(e,t){e.loginUserInfo=t},setToken(e,t){e.token=t}},actions:{setLoginUserInfo({commit:e},t){e("setLoginUserInfo",t)},setToken({commit:e},t){e("setToken",t)},setLogOut({commit:e}){e("setLoginUserInfo",null),e("setToken",null)}},plugins:[(0,g.Z)({storage:{getItem:e=>f.Z.get(e),setItem:(e,t)=>f.Z.set(e,t,{expires:30}),removeItem:e=>f.Z.remove(e)}})]}),w=o(7139);const I=e=>((0,s.dD)("data-v-e9bfbdd0"),e=e(),(0,s.Cn)(),e),x={class:"content-box"},_={class:"tab-bar"},y=["onClick"],L=I((()=>(0,s._)("span",{class:"iconfont icon-dropbox"},null,-1))),v=["onClick"],b=I((()=>(0,s._)("span",{class:"iconfont icon-layout-fill"},null,-1))),C=["onClick"],k=I((()=>(0,s._)("span",{class:"iconfont icon-tag-fill"},null,-1))),D=["onClick"],U=I((()=>(0,s._)("span",{class:"iconfont icon-user"},null,-1)));function W(e,t,o,a,n,i){const l=(0,s.up)("router-view"),r=(0,s.up)("router-link"),d=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(d,{class:"home-page"},{default:(0,s.w5)((()=>[(0,s._)("div",x,[(0,s.Wm)(l,null,{default:(0,s.w5)((({Component:e})=>[((0,s.wg)(),(0,s.j4)(s.Ob,{include:n.keepAliveList},[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))],1032,["include"]))])),_:1})]),(0,s._)("ul",_,[(0,s.Wm)(r,{to:{name:"ChooseFood"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[(0,s.Uk)("点餐 "),L],10,y)])),_:1}),(0,s.Wm)(r,{to:{name:"Order"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[(0,s.Uk)("订单 "),b],10,v)])),_:1}),(0,s.Wm)(r,{to:{name:"Category"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[(0,s.Uk)("分类 "),k],10,C)])),_:1}),(0,s.Wm)(r,{to:{name:"My"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[(0,s.Uk)("我的 "),U],10,D)])),_:1})])])),_:1})}var B={name:"Home",data(){return{keepAliveList:l}}};const A=(0,d.Z)(B,[["render",W],["__scopeId","data-v-e9bfbdd0"]]);var S=A;const F={class:"flex-1 overflow-auto bg-gray-100"},V={class:"p-5"},P={class:"text-center text-[12px] py-4"};function O(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("router-link"),p=(0,s.up)("CellGroup"),c=(0,s.up)("Form"),m=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(m,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1}),(0,s._)("div",F,[(0,s.Wm)(c,{ref:"loginFormEL"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"用户名",modelValue:n.loginUser.zh,"onUpdate:modelValue":t[0]||(t[0]=e=>n.loginUser.zh=e),placeholder:"请输入用户名",rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"用户名应为手机号",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"密码",type:"password",modelValue:n.loginUser.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.loginUser.password=e),placeholder:"请输入密码",rules:[{required:!0,message:"密码不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s._)("div",V,[(0,s.Wm)(d,{"loading-text":"正在登录",loading:n.isSubmiting,"loading-type":"spinner",type:"primary",onClick:i.checkLogin,round:"",block:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1},8,["loading","onClick"])]),(0,s._)("div",P,[(0,s.Uk)(" 还没有账号，去"),(0,s.Wm)(u,{to:{name:"Register"},class:"text-primaryColor"},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1})])])),_:1})])),_:1},512)])])),_:1})}var j=o(9733),z=o(5331),R=o(6944),M=o(3548),T=o(9545),E=o(70);const $=E.ZP.create({baseURL:"http://www.softeem.xin:9544",timeout:5e3});$.interceptors.request.use((e=>(console.log("请求拦截器"),e.headers["softeem_ele_client_token"]=h.getters.token,e))),$.interceptors.response.use((e=>(console.log("拦截"),"success"===e.data.status?Promise.resolve(e.data.data):(console.log("服务器请求成功，但status没成功"),console.log(e.data),Promise.reject(e.data)))),(e=>(console.log(e),Promise.reject(e))));var Z=$;const q={getListByPge({pageIndex:e,category_name:t}){return Z.get("/categoryInfo/getListByPage",{params:{pageIndex:e,category_name:t}})},getAllList(){return Z.get("/categoryInfo/getAllList")}};var H=q;const Y={getListByPage({pageIndex:e,food_name:t,category_name:o}){return Z.get("/foodInfo/getListByPage",{params:{pageIndex:e,food_name:t,category_name:o}})},getListById(e){return Z.get("/foodInfo/getListByCid",{params:{cid:e}})},findById(e){return Z.get("/foodInfo/findById",{params:{id:e}})}};var N=Y;const G={getCommentInfoListByFid({fid:e,pageIndex:t}){return Z.get("/commentInfo/getCommentInfoListByFid",{params:{fid:e,pageIndex:t}})}};var K=G;const Q={uploadUserPhoto(e){let t=new FormData;return t.append("user_photo",e),Z.post("/userInfo/uploadUserPhoto",t,{headers:{"Content-Type":"multipart/form-data"}})},add({nickName:e,user_sex:t,user_photo:o,user_phone:a,user_email:s,password:n}){return Z.post("/userInfo/add",{nickName:e,user_sex:t,user_phone:a,user_email:s,user_photo:o,password:n})},checkLogin({zh:e,password:t}){return Z.post("/userInfo/checkLogin",{zh:e,password:t})}};var J=Q;const X={getMyshopCartTotalInfo(){return Z.get("/shopCart/getMyShopCartTotalInfo")},addToShopCart({fid:e,count:t}){return Z.post("/shopCart/addToShopCart",{fid:e,count:t})},getShopCartListByPage({pageIndex:e}){return Z.get("/shopCart/getListByPage",{params:{pageIndex:e}})},deleteMyShopCartById(e){return Z.get("/shopCart/deleteMyShopCartFoodById",{params:{id:e}})}};var ee=X;const te={getListByParentId(e){return Z.get("/area/getListByParentId",{params:{parentId:e}})},getAllList(){return Z.get("/area/getAllList")}};var oe=te;const ae={addAddress({address:e,phone:t,person_name:o,tag:a}){return Z.post("/addressInfo/addAddress",{address:e,phone:t,person_name:o,tag:a})},getMyAddressInfoList(){return Z.get("/addressInfo/getMyAddressInfoList")},deleteById(e){return Z.get("/addressInfo/deleteById",{params:{id:e}})},findById(e){return Z.get("/addressInfo/findById",{params:{id:e}})},update({id:e,address:t,phone:o,person_name:a,tag:s}){return Z.post("/addressInfo/update",{id:e,address:t,phone:o,person_name:a,tag:s})}};var se=ae;const ne={submitOrder(e){return Z.post("/orderInfo/submitOrder",e,{headers:{"Content-Type":"application/json"}})},getMyOrderListByPage({pageIndex:e}){return Z.get("/orderInfo/getMyOrderListByPage",{params:{pageIndex:e}})},findById(e){return Z.get("/orderInfo/findById",{params:{id:e}})}};var ie=ne,le={categoryInfo:H,foodInfo:N,commentInfo:K,userInfo:J,shopCart:ee,area:oe,addressInfo:se,orderInfo:ie},re={name:"Login",data(){return{loginUser:{zh:"15172222222",password:"123456"},isSubmiting:!1}},computed:{},methods:{...(0,m.nv)(["setLoginUserInfo","setToken"]),checkLogin(){this.$refs.loginFormEL.validate().then((()=>{console.log("验证通过"),this.submitLoginForm()})).catch((e=>{console.log("验证没通过")}))},async submitLoginForm(){this.isSubmiting=!0;try{let e=await le.userInfo.checkLogin(this.loginUser);j.F.success("登录成功"),console.log(e),this.setLoginUserInfo(e.loginUserInfo),this.setToken(e.token),this.$router.back()}catch(e){j.F.fail("登录失败")}this.isSubmiting=!1}},components:{CellGroup:z.T,Form:R.l,Field:M.g,Button:T.z}};const de=(0,d.Z)(re,[["render",O]]);var ue=de,pe=(o(7658),o(1195));const ce={class:"flex-1 overflow-auto"},me={class:"h=[200px] flex flex-col justify-center items-center h-[160px] bg-gradient-to-b from-primaryColor to-green-300"},ge=["src"],fe={key:1,src:pe,alt:"",class:"w-[80px] h-[80px] rounded-full"},he={key:0},we={key:1};function Ie(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Cell"),d=(0,s.up)("CellGroup"),u=(0,s.up)("Empty"),p=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(p,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("我的")])),_:1}),(0,s._)("div",ce,[(0,s._)("div",me,[e.loginUserInfo?((0,s.wg)(),(0,s.iD)("img",{key:0,src:i.baseURL+e.loginUserInfo.user_photo,alt:"",class:"w-[80px] h-[80px] rounded-full"},null,8,ge)):((0,s.wg)(),(0,s.iD)("img",fe)),(0,s._)("p",{onClick:t[0]||(t[0]=t=>e.$router.push({name:"Login"})),class:"text-[14px] text-gray-700 mt-[10px]"},[e.loginUserInfo?((0,s.wg)(),(0,s.iD)("span",he,(0,w.zw)(e.loginUserInfo.nickName),1)):((0,s.wg)(),(0,s.iD)("span",we,"欢迎登录："))])]),e.loginUserInfo?((0,s.wg)(),(0,s.j4)(d,{key:0,title:"操作信息"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{icon:"shopping-cart-o",title:"购物车列表","is-link":!0,to:{name:"ShopCartList"}}),(0,s.Wm)(r,{icon:"shop-o",title:"我的订单","is-link":!0,to:{name:"Order"}}),(0,s.Wm)(r,{icon:"location-o",title:"收货地址","is-link":!0,to:{name:"AddressInfoList"}}),(0,s.Wm)(r,{icon:"guide-o",title:"退出登录",onClick:i.logOut,"is-link":!0},null,8,["onClick"])])),_:1})):((0,s.wg)(),(0,s.j4)(u,{key:1,description:"未登录"}))])])),_:1})}var xe=o(6431),_e=o(4250),ye=o(1719),Le={name:"My",inject:["baseURL"],computed:{...(0,m.Se)(["loginUserInfo"])},methods:{...(0,m.nv)(["setLogOut"]),logOut(){xe.V.confirm({title:"请确定",message:"你确定要推出登录吗？"}).then((()=>{this.setLogOut()})).catch((e=>{console.log(e)}))}},components:{CellGroup:z.T,Cell:_e.b,Empty:ye.H}};const ve=(0,d.Z)(Le,[["render",Ie]]);var be=ve;const Ce={class:"flex-1 overflow-auto bg-gray-200"},ke={key:1,class:"text-center py-10 text-[14px]"};function De(e,t,o,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("OrderItem"),u=(0,s.up)("List"),p=(0,s.up)("PullRefresh"),c=(0,s.up)("my-loading"),m=(0,s.up)("router-link"),g=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(g,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)("订单")])),_:1}),(0,s._)("div",Ce,[e.loginUserInfo?((0,s.wg)(),(0,s.j4)(c,{key:0,isLoading:i.isFirstLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:i.isLoading,"onUpdate:modelValue":t[0]||(t[0]=e=>i.isLoading=e),onRefresh:l.refreshData},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{"finished-text":"没有更多的数据了","loading-text":"正在加载数据...",finished:i.pageIndex>=i.pageCount,loading:i.isLoading,onLoad:l.loadNextPageOrder},{default:(0,s.w5)((()=>[(0,s.Wm)(a.W3,{"enter-active-class":"animate__animated animate__slideInUp"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.orderList,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e.id,orderList:e},null,8,["orderList"])))),128))])),_:1})])),_:1},8,["finished","loading","onLoad"])])),_:1},8,["modelValue","onRefresh"])])),_:1},8,["isLoading"])):((0,s.wg)(),(0,s.iD)("p",ke,[(0,s.Uk)("你还没有登录，请先去 "),(0,s.Wm)(m,{class:"text-primaryColor",to:{name:"Login"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" 登录 ")])),_:1})]))])])),_:1})}const Ue={class:"border border-gray-200 border-solid m-3 p-8 border-box bg-white"},We={class:"flex mb-[3px] py-[5px] box-border leading-[14px]"},Be=(0,s._)("span",{class:"font-bold"},"订单编号:",-1),Ae={class:"text-[14px] px-4"},Se={class:"flex mb-[3px] py-[5px] box-border leading-[14px]"},Fe=(0,s._)("span",{class:"font-bold"},"订单时间:",-1),Ve={class:"text-[14px] px-4"},Pe={class:"flex mb-[3px] py-[5px] box-border leading-[14px]"},Oe=(0,s._)("span",{class:"font-bold"},"订单总数:",-1),je={class:"text-[14px] px-4"},ze={class:"flex mb-[3px] py-[5px] box-border leading-[14px]"},Re=(0,s._)("span",{class:"font-bold"},"订单金额:",-1),Me={class:"text-[14px] px-4"},Te={class:"flex mb-[3px] py-[5px] box-border leading-[14px]"},Ee=(0,s._)("span",{class:"font-bold"},"订单状态:",-1),$e={class:"text-[14px] px-4"},Ze=(0,s._)("div",{class:"font-bold mb-[5px]"},"订单列表",-1),qe={class:"foodList flex justify-between mb-5 border-0 border-dashed border-black border-b"},He={class:"font-bold"},Ye={class:"text-[14px] px-1"},Ne={class:"text-[14px]"},Ge={class:"foodCount text-[14px] px-1"},Ke={key:0,class:"flex justify-end"};function Qe(e,t,o,a,n,i){const l=(0,s.up)("Step"),r=(0,s.up)("Steps"),d=(0,s.up)("Button");return(0,s.wg)(),(0,s.iD)("div",Ue,[(0,s._)("div",We,[Be,(0,s._)("span",Ae,(0,w.zw)(o.orderList.id),1)]),(0,s._)("div",Se,[Fe,(0,s._)("span",Ve,(0,w.zw)(i.formatDateTime(o.orderList.submit_time)),1)]),(0,s._)("div",Pe,[Oe,(0,s._)("span",je,(0,w.zw)(o.orderList.orderDetailList.length)+"件",1)]),(0,s._)("div",ze,[Re,(0,s._)("span",Me,(0,w.zw)(o.orderList.order_money),1),(0,s.Uk)(" ￥ ")]),(0,s._)("div",Te,[Ee,(0,s._)("span",$e,(0,w.zw)(o.orderList.order_status),1)]),(0,s.Wm)(r,{active:i.formatActiveIndex(o.orderList.order_status)},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("未付款")])),_:1}),(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("已付款")])),_:1}),(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("已发货")])),_:1}),(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("交易完成")])),_:1})])),_:1},8,["active"]),(0,s._)("div",null,[Ze,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orderList.formatOrderDetailList,((e,t)=>((0,s.wg)(),(0,s.iD)("div",qe,[(0,s._)("div",null,[(0,s._)("span",He,(0,w.zw)(t+1)+".",1),(0,s._)("span",Ye,(0,w.zw)(e.food_name)+"x",1),(0,s._)("span",Ne,(0,w.zw)(e.price),1)]),(0,s._)("div",Ge,(0,w.zw)(e.count),1)])))),256)),"已发货"==o.orderList.order_status?((0,s.wg)(),(0,s.iD)("div",Ke,[(0,s.Wm)(d,{size:"mini",plain:"",type:"primary"},{default:(0,s.w5)((()=>[(0,s.Uk)("评论")])),_:1})])):(0,s.kq)("",!0)])])}var Je=o(2346),Xe=o(7296),et=o(5743),tt=o.n(et);const ot=(e,t="YYYY-MM-DD HH:mm:ss")=>{let o=tt()(e);return o.isValid()?o.format(t):""};var at={name:"OderItem.vue",data(){return{activeIndex:0}},props:{orderList:{type:Object,required:!0}},methods:{formatDateTime:ot,formatActiveIndex(e){return"未付款"==e?0:"已付款"==e?1:"已发货"==e?2:"交易完成"==e?3:void 0}},components:{Steps:Je.R,Step:Xe.h,Button:T.z}};const st=(0,d.Z)(at,[["render",Qe]]);var nt=st,it=o(5943),lt=o(1441),rt={name:"Order",data(){return{orderList:[],listData:[],pageIndex:1,pageCount:0,isLoading:!0,isFirstLoading:!0}},computed:{...(0,m.Se)(["loginUserInfo"])},activated(){this.loginUserInfo&&this.isFirstLoading&&this.getMyOrderListByPage({pageIndex:this.pageIndex})},methods:{async getMyOrderListByPage({pageIndex:e,isRefresh:t=!1}){this.isLoading=!0;let o=await le.orderInfo.getMyOrderListByPage({pageIndex:this.pageIndex});console.log(o),this.pageCount=o.pageCount,this.pageIndex=o.pageIndex,t?this.listData=o.listData:this.listData.push(...o.listData),this.listData.forEach(((e,t)=>{this.orderList[t]=e,this.orderList[t].formatOrderDetailList=[],e.orderDetailList.forEach((async e=>{this.orderList[t].formatOrderDetailList.push(await this.getFoodInfoById(e.fid))}))})),console.log(this.orderList),this.isLoading=!1,this.isFirstLoading=!1},async getFoodInfoById(e){let t=await le.foodInfo.findById(e);return t},loadNextPageOrder(){this.pageIndex++,this.getMyOrderListByPage(this.pageIndex)},refreshData(){this.pageIndex=1,this.getMyOrderListByPage({pageIndex:this.pageIndex,isRefresh:!0})}},components:{OrderItem:nt,List:it.a,PullRefresh:lt.I}};const dt=(0,d.Z)(rt,[["render",De]]);var ut=dt;const pt=e=>((0,s.dD)("data-v-522e8cb3"),e=e(),(0,s.Cn)(),e),ct={key:0,class:"flex justify-center py-[10px]"},mt={class:"flex-1 overflow-auto flex flex-row"},gt={class:"w-[90px] h-full overflow-auto"},ft={class:"flex-1 overflow-auto"},ht={class:"text-primaryColor py-[3px] text-[24px]"},wt=["onClick"],It={class:"w-[110px] h-full"},xt={class:"flex-1 overflow-auto text-[12px] flex flex-col justify-between ml-[4px]"},_t={class:"text-[18px] font-bold"},yt=pt((()=>(0,s._)("div",{class:"absolute right-[5px] top-[5px] rounded-full p-[2px]"},[(0,s._)("span",{class:"iconfont icon-heart text-[24px] text-red-600"})],-1)));function Lt(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Loading"),d=(0,s.up)("SidebarItem"),u=(0,s.up)("Sidebar"),p=(0,s.up)("IndexAnchor"),c=(0,s.up)("Empty"),m=(0,s.up)("IndexBar"),g=(0,s.up)("page-view"),f=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.j4)(g,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("分类")])),_:1}),n.isLoading?((0,s.wg)(),(0,s.iD)("div",ct,[(0,s.Wm)(r,{"text-color":"#0094ff"},{default:(0,s.w5)((()=>[(0,s.Uk)("正在加载数据...")])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",mt,[(0,s._)("div",gt,[(0,s.Wm)(u,{class:"w-full",modelValue:n.selectedIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedIndex=e),onChange:i.sideBarChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.allCategoryList,(e=>((0,s.wg)(),(0,s.j4)(d,{title:e.category_name,key:e.id},null,8,["title"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,s._)("div",ft,[(0,s.Wm)(m,{"index-list":i.indexList,sticky:!1,ref:"rightIndexBar",onChange:i.indexBarChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.allCategoryList,((t,o)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t.id},[(0,s.Wm)(p,{index:o},{default:(0,s.w5)((()=>[(0,s._)("div",ht,(0,w.zw)(t.category_name),1)])),_:2},1032,["index"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.foodInfoList,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,onClick:o=>e.$router.push({name:"FoodDetail",params:{id:t.id}}),class:"h-[90px] flex flex-row relative p-[4px] border-0 border-b border-solid border-gray-200"},[(0,s.wy)((0,s._)("img",It,null,512),[[f,i.baseURL+t.food_img]]),(0,s._)("ul",xt,[(0,s._)("li",_t,(0,w.zw)(t.food_name),1),(0,s._)("li",null,"价格："+(0,w.zw)(t.price),1)]),yt],8,wt)))),128)),t.foodInfoList.length<=0?((0,s.wg)(),(0,s.j4)(c,{key:0,"image-size":"50px",description:"当前分类无菜品信息"})):(0,s.kq)("",!0)],64)))),128))])),_:1},8,["index-list","onChange"])])])])),_:1})}var vt=o(4930),bt=o(4575),Ct=o(6388),kt=o(6132),Dt=o(2229),Ut={name:"Category",inject:["baseURL"],data(){return{isLoading:!0,selectedIndex:0,allCategoryList:[]}},computed:{indexList(){return this.allCategoryList.map(((e,t)=>t))}},created(){this.getAllCategory()},methods:{async getAllCategory(){let e=await le.categoryInfo.getAllList();this.allCategoryList=e,this.isLoading=!1},indexBarChange(e){this.selectedIndex=e},sideBarChange(e){this.$refs.rightIndexBar.scrollTo(e)}},components:{Sidebar:vt.Y,SidebarItem:bt.R,IndexBar:Ct._,IndexAnchor:kt.R,Loading:Dt.g,Empty:ye.H}};const Wt=(0,d.Z)(Ut,[["render",Lt],["__scopeId","data-v-522e8cb3"]]);var Bt=Wt;const At={class:"flex-1 overflow-auto"},St=["src"];function Ft(e,t,o,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("SwipeItem"),u=(0,s.up)("Swipe"),p=(0,s.up)("food-item"),c=(0,s.up)("List"),m=(0,s.up)("Skeleton"),g=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(g,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" 点餐 ")])),_:1}),(0,s._)("div",At,[(0,s.Wm)(m,{row:8,loading:i.isFirstLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"h-[200px]",autoplay:5e3},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.swiperImg,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e},{default:(0,s.w5)((()=>[(0,s._)("img",{src:l.baseURL+e,alt:"",class:"w-full h-full"},null,8,St)])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(c,{loading:i.isLoading,"onUpdate:loading":t[0]||(t[0]=e=>i.isLoading=e),finished:l.finished,"finished-text":"没有更多了",onLoad:l.loadNextPage,"loading-text":"正在加载下一页"},{default:(0,s.w5)((()=>[(0,s.Wm)(a.W3,{"enter-active-class":"animate__animated animate__flipInY"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.listData,((e,t)=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,"item-data":e},null,8,["item-data"])))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["loading"])])])),_:1})}var Vt=o(8620),Pt=o(8101),Ot=o(9345);const jt={class:"flex-1 overflow-auto text-[12px] flex flex-col justify-between ml-[4px]"},zt={class:"text-[18px] font-bold"},Rt={class:"text-red-500"},Mt=(0,s._)("div",{class:"absolute right-[5px] top-[5px] rounded-full p-[2px]"},[(0,s._)("span",{class:"iconfont icon-heart text-[24px] text-red-600"})],-1);function Tt(e,t,o,n,i,l){const r=(0,s.up)("van-image");return(0,s.wg)(),(0,s.iD)("div",{onClick:t[1]||(t[1]=(...e)=>l.toFoodDetail&&l.toFoodDetail(...e)),class:"h-[90px] flex flex-row relative p-[4px] border-0 border-b border-solid border-gray-200"},[(0,s.Wm)(r,{src:l.baseURL+o.itemData.food_img,class:"w-[110px] h-full","lazy-load":"",onClick:t[0]||(t[0]=(0,a.iM)((e=>l.showImage(l.baseURL+o.itemData.food_img)),["stop"]))},null,8,["src"]),(0,s._)("ul",jt,[(0,s._)("li",zt,(0,w.zw)(o.itemData.food_name),1),(0,s._)("li",Rt,"月售："+(0,w.zw)(o.itemData.saleCount),1),(0,s._)("li",null,"价格："+(0,w.zw)(o.itemData.price),1),(0,s._)("li",null,"分类："+(0,w.zw)(o.itemData.categoryInfo.category_nme),1)]),Mt])}var Et=o(1835),$t=o(3),Zt={name:"FoodItem",props:["itemData"],inject:["baseURL"],methods:{showImage(e){(0,Et.e)([e])},toFoodDetail(){this.$router.push({name:"FoodDetail",params:{id:this.itemData.id}})}},components:{VanImage:$t.E}};const qt=(0,d.Z)(Zt,[["render",Tt]]);var Ht=qt,Yt={name:"ChooseFood",inject:["baseURL"],data(){return{pageIndex:1,listData:[],pageCount:0,isLoading:!1,isFirstLoading:!0,swiperImg:[]}},created(){this.getListByPage()},methods:{async getListByPage(e=1){this.isLoading=!0;try{let t=await le.foodInfo.getListByPage({pageIndex:e});this.pageIndex=t.pageIndex,this.listData.push(...t.listData),this.pageCount=t.pageCount,1==this.pageIndex&&(this.swiperImg=t.listData.slice(0,4).map((e=>e.food_img))),this.isFirstLoading=!1}catch(t){console.log(t)}finally{this.isLoading=!1}},loadNextPage(){this.pageIndex++,this.getListByPage(this.pageIndex)}},computed:{finished(){return this.pageIndex>=this.pageCount}},components:{Swipe:Vt.o,SwipeItem:Pt.j,List:it.a,Skeleton:Ot.O,FoodItem:Ht}};const Nt=(0,d.Z)(Yt,[["render",Ft]]);var Gt=Nt;const Kt={class:"flex-1 overflow-auto pb-[var(--van-action-bar-height)]",ref:"foodDetailContent"},Qt={class:"w-full h-[230px]"},Jt={crossorigin:"anonymous",class:"w-full h-full object-cover"},Xt={class:"text-[14px] leading-[22px] box-border p-[5px] border-0 border-b border-dash border-gray-200"},eo=(0,s._)("span",{class:"font-bold"},"菜品名称：",-1),to=(0,s._)("span",{class:"font-bold"},"价格：￥",-1),oo=(0,s._)("span",{class:"font-bold"},"类别：",-1),ao={class:"indent-[2em]"},so={class:"p-[5px]"},no=(0,s._)("div",{class:"text-primaryColor font-bold text-[18px]"}," 最新评论 ",-1),io={class:"flex flex-row py-2 items-center"},lo={crossorigin:"anonymous",class:"w-[40px] h-[40px] rounded-full",alt:""},ro={class:"flex-1 ml-2"},uo={class:"h-[40px] flex flex-col justify-between"},po={class:"text-[12px] text-gray-600"},co={class:"text-[14ox] leading-[24px]"};function mo(e,t,o,n,i,l){const r=(0,s.up)("Icon"),d=(0,s.up)("title-bar"),u=(0,s.up)("Rate"),p=(0,s.up)("List"),c=(0,s.up)("ActionBarIcon"),m=(0,s.up)("ActionBarButton"),g=(0,s.up)("ActionBar"),f=(0,s.up)("my-loading"),h=(0,s.up)("page-view"),I=(0,s.up)("ShareSheet"),x=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{"show-back":!0},{menu:(0,s.w5)((()=>[(0,s.Wm)(r,{name:"share-o",size:22,onClick:t[0]||(t[0]=e=>i.showShare=!0)})])),default:(0,s.w5)((()=>[(0,s.Uk)(" 【"+(0,w.zw)(i.foodDetail?.food_name)+"】菜品详情 ",1)])),_:1}),(0,s.Wm)(f,{isLoading:!i.foodDetail},{default:(0,s.w5)((()=>[(0,s._)("div",Kt,[(0,s.Wm)(p,{loading:i.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>i.isLoading=e),finished:l.finished,"finished-text":"没有更多了",onLoad:l.loadNextPageComment,"loading-text":"正在加载..."},{default:(0,s.w5)((()=>[(0,s._)("div",Qt,[(0,s.wy)((0,s._)("img",Jt,null,512),[[x,l.baseURL+i.foodDetail.food_img]])]),(0,s._)("ul",Xt,[(0,s._)("li",null,[eo,(0,s.Uk)((0,w.zw)(i.foodDetail.food_name),1)]),(0,s._)("li",null,[to,(0,s.Uk)((0,w.zw)(i.foodDetail.price),1)]),(0,s._)("li",null,[oo,(0,s.Uk)((0,w.zw)(i.foodDetail.categoryInfo.category_name),1)]),(0,s._)("li",ao,(0,w.zw)(i.foodDetail.food_desc),1)]),(0,s._)("div",so,[no,(0,s.Wm)(a.W3,{"enter-active-class":"animate__animated animate__slideInUp"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.commentInfoList,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"comment-item",key:e.id},[(0,s._)("div",io,[(0,s.wy)((0,s._)("img",lo,null,512),[[x,l.baseURL+e.userInfo.user_photo]]),(0,s._)("div",ro,(0,w.zw)(e.userInfo.nickName),1),(0,s._)("div",uo,[(0,s._)("div",po,(0,w.zw)(l.formatDateTime(e.create_time,"YYYY年MM月DD日 HH:mm:ss")),1),(0,s.Wm)(u,{modelValue:e.star,"onUpdate:modelValue":t=>e.star=t,color:"#ffd22e","void-icon":"star","void-color":"#eee"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,s._)("div",co,(0,w.zw)(e.foodInfo.food_desc),1)])))),128))])),_:1})])])),_:1},8,["loading","finished","onLoad"])],512),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{icon:"cart-o",text:"购物车",badge:i.totalCount},null,8,["badge"]),(0,s.Wm)(c,{icon:"balance-o",text:"金额",badge:i.totalPrice},null,8,["badge"]),(0,s.Wm)(c,{icon:"star",text:"已收藏",color:"#ff5500"}),(0,s.Wm)(m,{loading:i.isAddingShopCart,onClick:l.addToShopCart,type:"warning",text:"加入购物车"},null,8,["loading","onClick"]),(0,s.Wm)(m,{onClick:l.toShopCartList,type:"danger",text:"立即购买"},null,8,["onClick"])])),_:1})])),_:1},8,["isLoading"])])),_:1}),(0,s.Wm)(I,{show:i.showShare,"onUpdate:show":t[2]||(t[2]=e=>i.showShare=e),title:"立即分享给好友",options:i.shareOptions,onSelect:l.shareOptionSelect},null,8,["show","options","onSelect"])],64)}var go=o(2558),fo=o(3061),ho=o(5904),wo=o(9357),Io=o(3649),xo=o(6318),_o=o(7071),yo=o(8385),Lo=o(2269),vo=o.n(Lo),bo={name:"FoodDetail",inject:["baseURL"],data(){return{isLoading:!1,foodDetail:null,fid:null,pageIndex:1,pageCount:null,commentInfoList:[],shareOptions:[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}],showShare:!1,totalPrice:0,totalCount:0,isAddingShopCart:!1}},async created(){let e=this.$route.params.id;await this.findById(e),await this.getCommentInfoListByFid({fid:e,pageIndex:this.pageIndex}),this.loginUserInfo&&await this.getMyShopCartTotalInfo()},computed:{...(0,m.Se)(["loginUserInfo"]),finished(){return this.pageIndex>=this.pageCount}},methods:{async findById(e){let t=await le.foodInfo.findById(e);this.foodDetail=t},async getCommentInfoListByFid({fid:e,pageIndex:t}){this.isLoading=!0;let o=await le.commentInfo.getCommentInfoListByFid({fid:e,pageIndex:t});this.pageIndex=o.pageIndex,this.pageCount=o.pageCount,this.commentInfoList.push(...o.listData),this.isLoading=!1},loadNextPageComment(){this.pageIndex++,this.getCommentInfoListByFid({fid:this.id,pageIndex:this.pageIndex})},shareOptionSelect(e,t){if(2==t){const{toClipboard:e}=(0,_o.Z)();e(`分享一下·${location.href}`).then((()=>{j.F.success("快发给小伙伴看一下")}))}else 3==t?this.showFoodPost():4==t&&this.shareQRCode()},shareQRCode(){yo.toDataURL(location.href).then((e=>{(0,Et.e)({images:[e],onClose(){xe.V.confirm({title:"请确定",message:"要将分享二维码保存到本地吗"}).then((()=>{let t=document.createElement("a");t.href=e,t.download="分享二维码.png",t.click()})).catch((()=>{console.log("没有下载二维码")}))}})}))},async showFoodPost(){let e=await vo()(this.$refs.foodDetailContent,{useCORS:!0}),t=e.getContext("2d");t.save();let o=parseInt(e.style.width)/2,a=parseInt(e.style.height)/2;t.translate(o,a),t.font="36px 微软雅黑",t.textAlign="center",t.textBaseline="top",t.rotate(-Math.PI/4);let s=t.createLinearGradient(-o,-a,e.width,e.height);s.addColorStop(0,"red"),s.addColorStop(.5,"gold"),s.addColorStop(1,"cyan"),t.fillStyle=s,t.fillText("H2204·美食分享",0,0),t.restore();let n=await yo.toDataURL(location.href),i=new Image;i.src=n,i.onload=()=>{t.drawImage(i,20,50,100,100);let o=e.toDataURL("image/png");(0,Et.e)({images:[o],className:"animate__animated animate__bounceIn",onClose(){xe.V.confirm({title:"请确定",message:"要将海报保存到本地吗"}).then((()=>{let e=document.createElement("a");e.href=o,e.download=`${this.foodDetail.food_name}海报.png`,e.click()})).catch((()=>{console.log("没有下载海报")}))}})}},formatDateTime:ot,async getMyShopCartTotalInfo(){let e=await le.shopCart.getMyshopCartTotalInfo();this.totalCount=e.totalCount,this.totalPrice=e.totalPrice},async addToShopCart(){this.loginUserInfo?(this.isAddingShopCart=!0,await le.shopCart.addToShopCart({fid:this.foodDetail.id,count:1}),j.F.success("加入购物车成功"),this.getMyShopCartTotalInfo(),this.isAddingShopCart=!1):xe.V.confirm({title:"提示",message:"你还没有登录，要去登录吗"}).then((()=>{this.$router.push({name:"Login"})})).catch((()=>{}))},toShopCartList(){this.loginUserInfo?this.$router.push({name:"ShopCartList"}):xe.V.confirm({title:"提示",message:"你还没有登录，要去登录吗"}).then((()=>{this.$router.push({name:"login"})})).catch((()=>{}))}},components:{ActionBar:go.o,ActionBarIcon:fo.M,ActionBarButton:ho.Z,Rate:wo.j,List:it.a,Icon:Io.J,ShareSheet:xo.S,Toast:j.F}};const Co=(0,d.Z)(bo,[["render",mo]]);var ko=Co;const Do={class:"flex-1 overflow-auto bg-gray-100"},Uo={class:"p-5"};function Wo(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Radio"),u=(0,s.up)("RadioGroup"),p=(0,s.up)("Uploader"),c=(0,s.up)("Button"),m=(0,s.up)("CellGroup"),g=(0,s.up)("Form"),f=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(f,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1}),(0,s._)("div",Do,[(0,s.Wm)(g,{ref:"registerFormEL"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"昵称",placeholder:"输入昵称",modelValue:n.userInfo.nickName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.userInfo.nickName=e),rules:[{required:!0,message:"请输入昵称",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"性别"},{input:(0,s.w5)((()=>[(0,s.Wm)(u,{modelValue:n.userInfo.user_sex,"onUpdate:modelValue":t[1]||(t[1]=e=>n.userInfo.user_sex=e),direction:"horizontal"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"男"},{default:(0,s.w5)((()=>[(0,s.Uk)("男")])),_:1}),(0,s.Wm)(d,{name:"女"},{default:(0,s.w5)((()=>[(0,s.Uk)("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(r,{label:"密码",type:"password",placeholder:"输入密码",modelValue:n.userInfo.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.userInfo.password=e),rules:[{required:!0,message:"请输入密码",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"确认密码",type:"password",placeholder:"再次输入密码",modelValue:n.userInfo.confirmPwd,"onUpdate:modelValue":t[3]||(t[3]=e=>n.userInfo.confirmPwd=e),rules:[{required:!0,message:"请输入密码",trigger:"onBlur"},{validator:i.validatePwd,message:"确认密码错误",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"手机号",placeholder:"输入手机号",modelValue:n.userInfo.user_phone,"onUpdate:modelValue":t[4]||(t[4]=e=>n.userInfo.user_phone=e),rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"用户名应为手机号",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"邮箱",placeholder:"输入邮箱",modelValue:n.userInfo.user_email,"onUpdate:modelValue":t[5]||(t[5]=e=>n.userInfo.user_email=e),rules:[{pattern:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,message:"请正确输入邮箱",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"用户头像"},{input:(0,s.w5)((()=>[(0,s.Wm)(p,{"after-read":i.afterRead,modelValue:n.imgList,"onUpdate:modelValue":t[6]||(t[6]=e=>n.imgList=e),"max-count":1},null,8,["after-read","modelValue"])])),_:1}),(0,s._)("div",Uo,[(0,s.Wm)(c,{onClick:i.formSubmit,loading:n.isSubmiting,"loading-text":"正在提交数据","loading-type":"spinner",type:"primary",size:"small",round:"",block:""},{default:(0,s.w5)((()=>[(0,s.Uk)("提交")])),_:1},8,["onClick","loading"])])])),_:1})])),_:1},512)])])),_:1})}var Bo=o(2135),Ao=o(2544),So=o(1120),Fo=o(8118),Vo={name:"Register",inject:["baseURL"],data(){return{userInfo:{nickName:"",user_sex:"男",user_phone:"",user_email:"",password:"",confirmPwd:"",user_photo:""},imgList:[],isSubmiting:!1}},methods:{validatePwd(){return""!=this.userInfo.confirmPwd&&(this.userInfo.confirmPwd==this.userInfo.password&&void 0)},formSubmit(){this.$refs.registerFormEL.validate().then((()=>{console.log("验证成功"),this.submitData()})).catch((e=>{console.log("验证失败"),console.log(e)}))},submitData(){this.isSubmiting=!0,le.userInfo.add(this.userInfo).then((()=>{(0,Bo.g)({type:"success",message:"注册成功"})})).catch((()=>{(0,Bo.g)({type:"warning",message:"注册失败",onClose:()=>{this.$router.replace({name:"Login"})}})})).finally((()=>{this.isSubmiting=!1}))},async afterRead(e){console.log(e);let t=await le.userInfo.uploadUserPhoto(e.file);console.log(t),this.userInfo.user_photo=t,this.imgList=[{url:this.baseURL+t}]}},components:{Form:R.l,Field:M.g,CellGroup:z.T,Button:T.z,RadioGroup:Ao.E,Radio:So.Y,Uploader:Fo.Q}};const Po=(0,d.Z)(Vo,[["render",Wo]]);var Oo=Po;const jo={class:"flex-1 overflow-auto pb-[var(--van-submit-bar-height)]"},zo={class:"text-red-500"};function Ro(e,t,o,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("Stepper"),u=(0,s.up)("Card"),p=(0,s.up)("Button"),c=(0,s.up)("SwipeCell"),m=(0,s.up)("List"),g=(0,s.up)("Tab"),f=(0,s.up)("AddressList"),h=(0,s.up)("Tabs"),I=(0,s.up)("SubmitBar"),x=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(x,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("购物车")])),_:1}),(0,s._)("div",jo,[(0,s.Wm)(h,{animated:"",active:i.selectedIndex,"onUpdate:active":t[1]||(t[1]=e=>i.selectedIndex=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{title:"购物车列表"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{loading:i.isLoading,"loading-text":"加载下一页",finished:l.finished,"finished-text":"没有更多了",onLoad:l.loadNextPage},{default:(0,s.w5)((()=>[(0,s.Wm)(a.W3,{"leave-active-class":"animate__animated animate__bounceOutLeft"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.shopCartListData,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id},{right:(0,s.w5)((()=>[(0,s.Wm)(p,{type:"danger",square:"",class:"h-full",onClick:t=>l.deleteCurrentItem(e.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])),default:(0,s.w5)((()=>[(0,s.Wm)(u,{thumb:l.baseURL+e.foodInfo.food_img,title:e.foodInfo.food_name,price:e.foodInfo.price},{tags:(0,s.w5)((()=>[(0,s.Wm)(d,{onPlus:t=>l.plusOne(e.fid),onMinus:t=>l.minusOne(e.fid),class:"num-box",min:"1",max:"100",modelValue:e.count,"onUpdate:modelValue":t=>e.count=t,theme:"round","button-size":"16"},null,8,["onPlus","onMinus","modelValue","onUpdate:modelValue"])])),num:(0,s.w5)((()=>[(0,s._)("span",zo,"小计:￥"+(0,w.zw)((e.foodInfo.price*e.count).toFixed(2)),1)])),_:2},1032,["thumb","title","price"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])),_:1}),(0,s.Wm)(g,{title:"地址列表"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{list:i.myAddressInfoList,modelValue:i.chosenAddressId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.chosenAddressId=e)},null,8,["list","modelValue"])])),_:1})])),_:1},8,["active"])]),(0,s.Wm)(I,{price:l.totalMoney,"button-text":"提交订单",onClick:l.submitOrder},null,8,["price","onClick"])])),_:1})}var Mo=o(8876),To=o(2727),Eo=o(5191),$o=o(598),Zo=o(257),qo=o(1348),Ho=o(7779),Yo={name:"ShopCartList",inject:["baseURL"],data(){return{test:1,pageIndex:1,pageCount:0,shopCartListData:[],isLoading:!1,myAddressInfoList:[],chosenAddressId:"",selectedIndex:0}},created(){this.getShopCartListByPage({pageIndex:this.pageIndex}),this.getMyAddressInfoList()},computed:{totalMoney(){let e=0;return this.shopCartListData.forEach((t=>{e+=t.count*t.foodInfo.price})),100*e},finished(){return this.pageIndex>=this.pageCount}},methods:{async getShopCartListByPage({pageIndex:e}){this.isLoading=!0;let t=await le.shopCart.getShopCartListByPage({pageIndex:e});console.log(t),this.pageCount=t.pageCount,this.shopCartListData.push(...t.listData),this.isLoading=!1},async deleteCurrentItem(e){console.log(e),xe.V.confirm({title:"请确定",message:"你确定要删除吗？"}).then((async()=>{await le.shopCart.deleteMyShopCartById(e);let t=this.shopCartListData.findIndex((t=>t.id==e));-1!=t&&this.shopCartListData.splice(t,1)})).catch((()=>{}))},plusOne(e){le.shopCart.addToShopCart({fid:e,count:1})},minusOne(e){le.shopCart.addToShopCart({fid:e,count:-1})},loadNextPage(){this.pageIndex<this.pageCount&&(this.pageIndex++,this.getShopCartListByPage({pageIndex:this.pageIndex}))},async getMyAddressInfoList(){let e=await le.addressInfo.getMyAddressInfoList(),t=e.map((e=>({id:e.id,name:e.person_name,tel:e.phone,address:e.address,tag:e.tag})));this.myAddressInfoList=t,console.log(t)},async submitOrder(){if(this.chosenAddressId){let e={aid:this.chosenAddressId,foodList:this.shopCartListData.map((e=>({fid:e.fid,count:e.count})))};console.log(e),await le.orderInfo.submitOrder(e),j.F.success("订单提交成功"),this.$router.replace({name:"Order"})}else(0,Bo.g)({type:"warning",message:"请先选择地址"}),this.selectedIndex=1}},components:{Tab:Mo.O,Tabs:To.m,Card:Eo.Z,Stepper:$o.v,SwipeCell:Zo.Q,Button:T.z,SubmitBar:qo.J,List:it.a,AddressList:Ho.s}};const No=(0,d.Z)(Yo,[["render",Ro],["__scopeId","data-v-009700aa"]]);var Go=No;const Ko={class:"flex-1 overflow-auto"},Qo={class:"flex flex-row justify-end"},Jo={class:"box-border px-4 py-2"};function Xo(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Tag"),d=(0,s.up)("Button"),u=(0,s.up)("AddressList"),p=(0,s.up)("my-loading"),c=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(c,{class:"flex flex-col address-list-page"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("我的收货地址")])),_:1}),(0,s._)("div",Ko,[(0,s.Wm)(p,{isLoading:n.isLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{list:n.list,onEdit:i.editCurrentAddress},{tag:(0,s.w5)((e=>[(0,s.Wm)(r,{type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,w.zw)(e.tag),1)])),_:2},1024)])),"item-bottom":(0,s.w5)((e=>[(0,s._)("div",Qo,[(0,s.Wm)(d,{type:"danger",size:"mini",onClick:t=>i.deleteAddressInfoListById(e.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])])),_:1},8,["list","onEdit"])])),_:1},8,["isLoading"])]),(0,s._)("div",Jo,[(0,s.Wm)(d,{type:"primary",block:"",round:"",plain:"",size:"small",onClick:t[0]||(t[0]=t=>e.$router.push({name:"AddAddressInfo"}))},{default:(0,s.w5)((()=>[(0,s.Uk)("新增地址")])),_:1})])])),_:1})}var ea=o(3875),ta={name:"AddressInfoList",data(){return{list:[],isLoading:!0}},created(){this.getMyAddressInfoList()},methods:{async getMyAddressInfoList(){this.isLoading=!0;let e=await le.addressInfo.getMyAddressInfoList(),t=e.map((e=>({id:e.id,name:e.person_name,tel:e.phone,address:e.address,tag:e.tag})));this.list=t,this.isLoading=!1},async deleteAddressInfoListById(e){xe.V.confirm({title:"请确认",message:"你确定要删除这一项地址吗？"}).then((async()=>{await le.addressInfo.deleteById(e);let t=this.list.findIndex((t=>t.id==e));-1!=t&&(this.list.splice(t,1),j.F.success("删除地址成功"))})).catch((()=>{j.F.fail("删除失败")}))},editCurrentAddress(e,t){console.log(e),this.$router.push({name:"EditAddressInfo",params:{id:e.id}})}},components:{Button:T.z,AddressList:Ho.s,Tag:ea.V}};const oa=(0,d.Z)(ta,[["render",Xo],["__scopeId","data-v-756d5dc9"]]);var aa=oa;const sa={class:"px-2 py-3"};function na(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("CellGroup"),p=(0,s.up)("Form"),c=(0,s.up)("page-view"),m=(0,s.up)("Cascader"),g=(0,s.up)("Popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("新增收货地址")])),_:1}),(0,s.Wm)(p,{class:"mt-4",ref:"addressInfoFormEL"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"姓名",modelValue:n.addressInfoData.person_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.addressInfoData.person_name=e),placeholder:"请输入收件人姓名",rules:[{required:!0,message:"收件人姓名不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"电话",modelValue:n.addressInfoData.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>n.addressInfoData.phone=e),placeholder:"请输入收件人电话",rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"请输入正确的电话号码",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"地区",modelValue:n.addressInfoData.province_city_county,"onUpdate:modelValue":t[2]||(t[2]=e=>n.addressInfoData.province_city_county=e),placeholder:"请选择地区",readonly:"","is-link":"",onClick:t[3]||(t[3]=e=>n.isShowPopup=!0)},null,8,["modelValue"]),(0,s.Wm)(r,{rules:[{required:!0,message:"详细地址不能为空",trigger:"onBlur"}],label:"详细地址",modelValue:n.addressInfoData.detailAddress,"onUpdate:modelValue":t[4]||(t[4]=e=>n.addressInfoData.detailAddress=e),placeholder:"街道门排信息"},null,8,["modelValue"]),(0,s.Wm)(r,{label:"标签",rules:[{required:!0,message:"标签不能为空",trigger:"onBlur"}],modelValue:n.addressInfoData.tag,"onUpdate:modelValue":t[5]||(t[5]=e=>n.addressInfoData.tag=e),placeholder:"给地址起标签"},null,8,["modelValue"]),(0,s._)("div",sa,[(0,s.Wm)(d,{type:"primary",block:"",round:"",size:"small",onClick:i.submitForm},{default:(0,s.w5)((()=>[(0,s.Uk)("保存")])),_:1},8,["onClick"])])])),_:1})])),_:1},512)])),_:1}),(0,s.Wm)(g,{show:n.isShowPopup,"onUpdate:show":t[6]||(t[6]=e=>n.isShowPopup=e),position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"请选择所在地区",options:n.cascaderOptions,onFinish:i.cascaderFinish},null,8,["options","onFinish"])])),_:1},8,["show"])],64)}var ia=o(6305),la=o(9723),ra={name:"AddAddressInfo",data(){return{isShowPopup:!1,cascaderOptions:[],addressInfoData:{phone:"",person_name:"",tag:"",address:"",province_city_county:"",detailAddress:""}}},created(){this.getProvinceList()},methods:{async getProvinceList(){let e=await le.area.getAllList();console.log(e);let t=e.filter((e=>1==e.level)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>2==e.level&&e.parentId==t.id)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>3==e.level&&e.parentId==t.id)).map((e=>({text:e.areaName,value:e.id})))})))})));console.log(t),this.cascaderOptions=t},async getAllList(){let e=await le.area.getAllList();console.log(e)},cascaderFinish({selectedOptions:e}){this.addressInfoData.province_city_county=e.map((e=>e.text)).join(" "),this.isShowPopup=!1,console.log(e)},submitForm(){this.$refs.addressInfoFormEL.validate().then((()=>{this.addAddress()})).catch((()=>{(0,Bo.g)({type:"warning",message:"请正确填写表单"})}))},async addAddress(){this.addressInfoData.address=this.addressInfoData.province_city_county+" "+this.addressInfoData.detailAddress;let e=await le.addressInfo.addAddress(this.addressInfoData);console.log(e),j.F.success("新增地址成功"),this.$router.back()}},components:{Form:R.l,CellGroup:z.T,Field:M.g,Button:T.z,Popup:ia.G,Cascader:la.v}};const da=(0,d.Z)(ra,[["render",na]]);var ua=da;const pa={class:"px-2 py-3"};function ca(e,t,o,a,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("CellGroup"),p=(0,s.up)("Form"),c=(0,s.up)("page-view"),m=(0,s.up)("Cascader"),g=(0,s.up)("Popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("编辑收货地址")])),_:1}),(0,s.Wm)(p,{class:"mt-4",ref:"addressInfoFormEL"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"姓名",modelValue:n.addressInfoData.person_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.addressInfoData.person_name=e),placeholder:"请输入收件人姓名",rules:[{required:!0,message:"收件人姓名不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"电话",modelValue:n.addressInfoData.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>n.addressInfoData.phone=e),placeholder:"请输入收件人电话",rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"请输入正确的电话号码",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"地区",modelValue:n.addressInfoData.province_city_county,"onUpdate:modelValue":t[2]||(t[2]=e=>n.addressInfoData.province_city_county=e),placeholder:"请选择地区",readonly:"","is-link":"",onClick:t[3]||(t[3]=e=>n.isShowPopup=!0)},null,8,["modelValue"]),(0,s.Wm)(r,{rules:[{required:!0,message:"详细地址不能为空",trigger:"onBlur"}],label:"详细地址",modelValue:n.addressInfoData.detailAddress,"onUpdate:modelValue":t[4]||(t[4]=e=>n.addressInfoData.detailAddress=e),placeholder:"街道门排信息"},null,8,["modelValue"]),(0,s.Wm)(r,{label:"标签",rules:[{required:!0,message:"标签不能为空",trigger:"onBlur"}],modelValue:n.addressInfoData.tag,"onUpdate:modelValue":t[5]||(t[5]=e=>n.addressInfoData.tag=e),placeholder:"给地址起标签"},null,8,["modelValue"]),(0,s._)("div",pa,[(0,s.Wm)(d,{type:"primary",block:"",round:"",size:"small",onClick:i.submitForm},{default:(0,s.w5)((()=>[(0,s.Uk)("保存")])),_:1},8,["onClick"])])])),_:1})])),_:1},512)])),_:1}),(0,s.Wm)(g,{show:n.isShowPopup,"onUpdate:show":t[6]||(t[6]=e=>n.isShowPopup=e),position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"请选择所在地区",options:n.cascaderOptions,onFinish:i.cascaderFinish},null,8,["options","onFinish"])])),_:1},8,["show"])],64)}var ma={name:"EditAddressInfo",data(){return{isShowPopup:!1,cascaderOptions:[],addressInfoData:{id:"",phone:"",person_name:"",tag:"",address:"",province_city_county:"",detailAddress:""}}},created(){let e=this.$route.params.id;this.findById(e),console.log(e),this.addressInfoData.id=e,this.getProvinceList()},methods:{async findById(e){let t=await le.addressInfo.findById(e);console.log(t),this.addressInfoData.phone=t.phone,this.addressInfoData.person_name=t.person_name,this.addressInfoData.tag=t.tag,this.addressInfoData.id=t.id,this.addressInfoData.address=t.address;let o=t.address.split(" ");this.addressInfoData.province_city_county=o.slice(0,3).join(" "),this.addressInfoData.detailAddress=o.pop()},async getProvinceList(){let e=await le.area.getAllList();console.log(e);let t=e.filter((e=>1==e.level)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>2==e.level&&e.parentId==t.id)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>3==e.level&&e.parentId==t.id)).map((e=>({text:e.areaName,value:e.id})))})))})));console.log(t),this.cascaderOptions=t},async getAllList(){let e=await le.area.getAllList();console.log(e)},cascaderFinish({selectedOptions:e}){this.addressInfoData.province_city_county=e.map((e=>e.text)).join(" "),this.isShowPopup=!1,console.log(e)},submitForm(){this.$refs.addressInfoFormEL.validate().then((()=>{this.editAddressInfo()})).catch((()=>{(0,Bo.g)({type:"warning",message:"请正确填写表单"})}))},async editAddressInfo(){this.addressInfoData.address=this.addressInfoData.province_city_county+" "+this.addressInfoData.detailAddress,await le.addressInfo.update(this.addressInfoData),j.F.success("修改成功"),this.$router.replace({name:"AddressInfoList"})}},components:{Form:R.l,CellGroup:z.T,Field:M.g,Button:T.z,Popup:ia.G,Cascader:la.v}};const ga=(0,d.Z)(ma,[["render",ca]]);var fa=ga;const ha=(0,c.p7)({history:(0,c.r5)(),routes:[{path:"/",redirect:{name:"ChooseFood"}},{path:"/Home",name:"Home",component:S,children:[{path:"ChooseFood",name:"ChooseFood",component:Gt},{path:"Order",name:"Order",component:ut},{path:"Category",name:"Category",component:Bt},{path:"My",name:"My",component:be}]},{path:"/Login",name:"Login",component:ue},{path:"/FoodDetail/:id",name:"FoodDetail",component:ko},{path:"/Register",name:"Register",component:Oo},{path:"/ShopCartList",name:"ShopCartList",component:Go,meta:{requireAuth:!0}},{path:"/AddressInfoList",name:"AddressInfoList",component:aa,meta:{requireAuth:!0}},{path:"/AddAddressInfo",name:"AddAddressInfo",component:ua,meta:{requireAuth:!0}},{path:"/EditAddressInfo/:id",name:"EditAddressInfo",component:fa,meta:{requireAuth:!0}}]});ha.beforeEach(((e,t,o)=>{console.log("我是beforeEach"),1==e.meta.requireAuth?h.getters.loginUserInfo?o():o({name:"Login"}):o()}));var wa=ha,Ia=(o(5177),o(5110),o(1738));const xa={class:"page-view"};function _a(e,t,o,a,n,i){return(0,s.wg)(),(0,s.iD)("div",xa,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var ya={name:"PageView"};const La=(0,d.Z)(ya,[["render",_a],["__scopeId","data-v-27d5649c"]]);var va=La;const ba={class:"title-bar"},Ca={class:"right-menu"};function ka(e,t,o,a,n,i){return(0,s.wg)(),(0,s.iD)("div",ba,[o.showBack?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"left-back",onClick:t[0]||(t[0]=e=>this.$router.back())}," 返回 ")):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"default",{},void 0,!0),(0,s._)("div",Ca,[(0,s.WI)(e.$slots,"menu",{},void 0,!0)])])}var Da={name:"TitleBar",props:{showBack:{type:Boolean,default:!1}}};const Ua=(0,d.Z)(Da,[["render",ka],["__scopeId","data-v-4ad82c0a"]]);var Wa=Ua;const Ba={key:0,class:"flex flex-row justify-center py-[5px]"};function Aa(e,t,o,a,n,i){const l=(0,s.up)("Loading");return o.isLoading?((0,s.wg)(),(0,s.iD)("div",Ba,[(0,s.Wm)(l,{type:"sponner",color:"#1989fa"},{default:(0,s.w5)((()=>[(0,s.Uk)("正在加载中...")])),_:1})])):(0,s.WI)(e.$slots,"default",{key:1})}var Sa={name:"MyLoading",props:{isLoading:{type:Boolean,default:!0,require:!0}},components:{Loading:Dt.g}};const Fa=(0,d.Z)(Sa,[["render",Aa]]);var Va=Fa;const Pa=(0,a.ri)(p);Pa.component("page-view",va),Pa.component("title-bar",Wa),Pa.component("my-loading",Va),Pa.provide("baseURL","http://www.softeem.xin:9544"),Pa.use(Ia.J,{loading:o(1195),error:o(1195),attempt:3,preload:1.3}),Pa.use(wa),Pa.use(h),Pa.mount("#app")},5177:function(){const e=()=>{let e=document.documentElement.clientWidth;e>750&&(e=750),document.documentElement.style.fontSize=e/375*100+"px"};document.addEventListener("DOMContentLoaded",e),window.addEventListener("resize",e)},1195:function(e,t,o){"use strict";e.exports=o.p+"img/edu.f0ce20a1.jpg"}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,n){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],n=e[u][2];for(var l=!0,r=0;r<a.length;r++)(!1&n||i>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[r])}))?a.splice(r--,1):(l=!1,n<i&&(i=n));if(l){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,s,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p=""}(),function(){var e={826:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,i=a[0],l=a[1],r=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(r)var u=r(o)}for(t&&t(a);d<i.length;d++)n=i[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},a=self["webpackChunkvueclitest"]=self["webpackChunkvueclitest"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(9903)}));a=o.O(a)})();
//# sourceMappingURL=index.b13cecbc.js.map