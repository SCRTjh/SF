"use strict";(self["webpackChunkmovie_manager"]=self["webpackChunkmovie_manager"]||[]).push([[151],{5151:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var r=a(3396),o=a(4870),u=a(2748),m=a(2807),d=a(946),t=a(678);const i=e=>((0,r.dD)("data-v-028ab643"),e=e(),(0,r.Cn)(),e),s={class:"flex flex-row justify-between"},p=i((()=>(0,r._)("span",null,"新增电影",-1))),n=(0,r.Uk)("返回列表"),c=["src"],g=(0,r.Uk)("保存数据"),_=(0,r.Uk)("重置表单");var v={__name:"AddMovieInfo",setup(e){const l=(0,t.tv)(),a=(0,r.f3)("baseURL"),i=(0,o.qj)({movie_name:"",duration:"",movie_pc:"",movie_desc:"",publicTime:"",tags:[],role:"",movie_score:0}),v={movie_name:[{required:!0,message:"请输入电影名称",trigger:"blur"}],duration:[{required:!0,message:"请输入电影时长",trigger:"blur"},{pattern:/^\d+$/,message:"请输入正确的电影时长",trigger:"blur"}],movie_pc:[{required:!0,message:"请输入电影海报",trigger:"blur"}],movie_desc:[{required:!0,message:"请输入电影描述",trigger:"blur"}],publicTime:[{required:!0,message:"请输入电影上映时间",trigger:"blur"}],tags:[{required:!0,message:"请输入电影标签",trigger:"blur"}],role:[{required:!0,message:"请输入电影角色",trigger:"blur"}],movie_score:[{required:!0,message:"请输入电影评分",trigger:"blur"},{pattern:/^\d(\.\d+)?$/,message:"请输入正确的电影评分",trigger:"blur"}]},f=(0,o.iH)(null),b=e=>{i.movie_pc=e.data,m.z8.success("上传成功")},w=e=>/^image\/(jpe?g|png|gif|svg|webp|bmp)$/.test(e.type)?!(e.size/1024/1024>2)||(m.z8.error("图片大小不能超过2MB!"),!1):(m.z8.error("请选择图片格式"),!1),W=()=>{f.value.validate((e=>{e?h():m.z8.error("请将信息填写完整")}))},V=(0,o.iH)(!1),h=()=>{V.value=!0,d.Z.movieInfo.add(i).then((e=>{m.z8.success("添加成功"),l.replace({name:"MovieInfoList"})})).finally((()=>{V.value=!1}))},k=()=>{f.value.resetFields()};return(e,l)=>{const m=(0,r.up)("router-link"),d=(0,r.up)("el-input"),t=(0,r.up)("el-form-item"),h=(0,r.up)("el-icon"),U=(0,r.up)("el-upload"),y=(0,r.up)("el-date-picker"),x=(0,r.up)("el-input-number"),q=(0,r.up)("el-button"),z=(0,r.up)("el-form"),M=(0,r.up)("el-card");return(0,r.wg)(),(0,r.j4)(M,null,{header:(0,r.w5)((()=>[(0,r._)("div",s,[p,(0,r.Wm)(m,{class:"text-blue-500",to:{name:"MovieInfoList"}},{default:(0,r.w5)((()=>[n])),_:1})])])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{"label-width":"120px",model:i,rules:v,ref_key:"formEl",ref:f},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{label:"电影名称",prop:"movie_name"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{placeholder:"请输入管理员名称",modelValue:i.movie_name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.movie_name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,{label:"电影时长",prop:"duration"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{placeholder:"请输入电影时长",modelValue:i.duration,"onUpdate:modelValue":l[1]||(l[1]=e=>i.duration=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,{label:"电影图片",prop:"movie_pc"},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"upload-box w-[120px] h-[150px] border-dashed border border-gray-500 flex justify-center items-center",action:(0,o.SU)(a)+"/movie-info/uploadMoviePc","show-file-list":!1,"on-success":b,"before-upload":w,name:"movie_pc"},{default:(0,r.w5)((()=>[i.movie_pc?((0,r.wg)(),(0,r.iD)("img",{key:0,src:(0,o.SU)(a)+i.movie_pc,class:"avatar"},null,8,c)):((0,r.wg)(),(0,r.j4)(h,{key:1,size:60},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.D5R))])),_:1}))])),_:1},8,["action"])])),_:1}),(0,r.Wm)(t,{label:"上映时间",prop:"publicTime"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:i.publicTime,"onUpdate:modelValue":l[2]||(l[2]=e=>i.publicTime=e),type:"date",placeholder:"请选择上映日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,{label:"电影类型",prop:"tags"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{placeholder:"请输入电影类型 ，用空格隔开",modelValue:i.tags,"onUpdate:modelValue":l[3]||(l[3]=e=>i.tags=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,{label:"主演人员",prop:"role"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{placeholder:"请输入主演人员，用空格隔开",modelValue:i.role,"onUpdate:modelValue":l[4]||(l[4]=e=>i.role=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,{label:"电影评分",prop:"movie_score"},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{placeholder:"请输入电影评分",modelValue:i.movie_score,"onUpdate:modelValue":l[5]||(l[5]=e=>i.movie_score=e),precision:1,step:.1,max:9.9},null,8,["modelValue","step","max"])])),_:1}),(0,r.Wm)(t,{label:"电影简介",prop:"movie_desc"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{placeholder:"请输入电影简介",modelValue:i.movie_desc,"onUpdate:modelValue":l[6]||(l[6]=e=>i.movie_desc=e),type:"textarea",rows:"8"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(q,{type:"primary",onClick:W,loading:V.value},{default:(0,r.w5)((()=>[g])),_:1},8,["loading"]),(0,r.Wm)(q,{type:"danger",onClick:k},{default:(0,r.w5)((()=>[_])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}},f=a(89);const b=(0,f.Z)(v,[["__scopeId","data-v-028ab643"]]);var w=b}}]);
//# sourceMappingURL=151.b91313d9.js.map