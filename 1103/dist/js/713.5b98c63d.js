"use strict";(self["webpackChunkmovie_manager"]=self["webpackChunkmovie_manager"]||[]).push([[713],{9713:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(3396),n=t(4870),o=t(7139),i=t(2748),r=t(946),u=t(2807);const p=(0,a.Uk)("查询"),d=(0,a.Uk)("新增影片"),m={"element-loading-text":"正在加载数据"},s=(0,a.Uk)("编辑"),c=(0,a.Uk)("删除"),g={class:"flex flex-row justify-between items-center mt-[10px]"};var w={__name:"MovieInfoList",setup(e){const l=(0,a.f3)("baseURL"),t=(0,n.qj)({movie_name:"",tags:[],pageIndex:1}),w=(0,n.qj)({listData:[],totalCount:0,pageCount:0}),f=(0,n.iH)(!1),v=()=>{f.value=!0,r.Z.movieInfo.getListByPage({...t,tags:t.tags.join(" ")}).then((e=>{w.listData=e.data.listData,w.totalCount=e.data.totalCount,w.pageCount=e.data.pageCount})).finally((()=>{f.value=!1}))};v();const _=e=>{t.pageIndex=e,v()},W=e=>{r.Z.movieInfo.deleteById(e.id).then((e=>{u.z8.success("删除成功"),v()}))};return(e,r)=>{const u=(0,a.up)("el-input"),b=(0,a.up)("el-form-item"),h=(0,a.up)("el-select"),C=(0,a.up)("el-button"),k=(0,a.up)("el-form"),x=(0,a.up)("el-table-column"),y=(0,a.up)("el-image"),I=(0,a.up)("el-popconfirm"),U=(0,a.up)("el-table"),z=(0,a.up)("el-pagination"),D=(0,a.up)("el-card"),V=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.j4)(D,{header:"影片列表"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{inline:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{label:"影片名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{placeholder:"影片名称",modelValue:t.movie_name,"onUpdate:modelValue":r[0]||(r[0]=e=>t.movie_name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,{label:"影片标签"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:t.tags,"onUpdate:modelValue":r[1]||(r[1]=e=>t.tags=e),multiple:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"输入标签"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{type:"primary",icon:(0,n.SU)(i.olm),loading:f.value,onClick:r[2]||(r[2]=e=>{t.pageIndex=1,v()})},{default:(0,a.w5)((()=>[p])),_:1},8,["icon","loading"]),(0,a.Wm)(C,{type:"default",icon:(0,n.SU)(i.Gq5),onClick:r[3]||(r[3]=l=>e.$router.push({name:"AddMovieInfo"}))},{default:(0,a.w5)((()=>[d])),_:1},8,["icon"])])),_:1})])),_:1}),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(U,{data:w.listData,stripe:"",border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{label:"ID",prop:"id",width:"60",align:"center"}),(0,a.Wm)(x,{label:"电影名称",prop:"movie_name",width:"150"}),(0,a.Wm)(x,{label:"电影海报",width:"150","min-width":"80",align:"center"},{default:(0,a.w5)((({row:e})=>[(0,a.Wm)(y,{style:{width:"50px",height:"50px"},src:(0,n.SU)(l)+e.movie_pc,"preview-src-list":[(0,n.SU)(l)+e.movie_pc],fit:"cover","z-index":9999,"preview-teleported":!0},null,8,["src","preview-src-list"])])),_:1}),(0,a.Wm)(x,{label:"时长",prop:"duration",align:"center",width:"100"}),(0,a.Wm)(x,{label:"上映时间",prop:"publicTime",align:"center",width:"120"}),(0,a.Wm)(x,{label:"电影标签",prop:"tags"}),(0,a.Wm)(x,{label:"演员",prop:"role"}),(0,a.Wm)(x,{label:"评分",prop:"movie_score",width:"80",align:"center"}),(0,a.Wm)(x,{label:"操作",width:"150",align:"center"},{default:(0,a.w5)((({row:l})=>[(0,a.Wm)(C,{type:"warning",size:"small",onClick:t=>e.$router.push({name:"EditMovieInfo",params:{id:l.id}})},{default:(0,a.w5)((()=>[s])),_:2},1032,["onClick"]),(0,a.Wm)(I,{title:"你确定要删除吗?",onConfirm:e=>W(l)},{reference:(0,a.w5)((()=>[(0,a.Wm)(C,{type:"danger",size:"small"},{default:(0,a.w5)((()=>[c])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,a._)("div",g,[(0,a._)("div",null,"当前第"+(0,o.zw)(t.pageIndex)+"页，共"+(0,o.zw)(w.pageCount)+"页，共"+(0,o.zw)(w.totalColunt)+"条",1),(0,a.Wm)(z,{background:"",layout:"prev,pager,next",total:w.totalCount,onCurrentChange:_,"current-page":t.pageIndex},null,8,["total","current-page"])])])),[[V,f.value]])])),_:1})}}};const f=w;var v=f}}]);
//# sourceMappingURL=713.5b98c63d.js.map