"use strict";(self["webpackChunkmovie_manager"]=self["webpackChunkmovie_manager"]||[]).push([[495],{3495:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(3396),n=a(7139),o=a(4870),i=a(2748),u=a(946),d=a(2807),m=a(5743),r=a.n(m);const p=(e,l="YYYY-MM-DD")=>{const a=r()(e);return a.isValid()?a.format(l):""},f=(0,t.Uk)("查询"),w=(0,t.Uk)("新增电影排片"),s={"element-loading-text":"正在加载数据"},c=(0,t.Uk)("编辑"),g=(0,t.Uk)("删除"),_={class:"flex flex-row justify-between items-center mt-[10px]"};var v={__name:"PlanInfoList",setup(e){(0,t.f3)("baseURL");const l=(0,o.qj)({mid:"",hid:"",start_time:"",end_time:"",pageIndex:1}),a=(0,o.qj)({listData:[],totalCount:0,pageCount:0}),m=(0,o.iH)([]);u.Z.movieInfo.getAllList().then((e=>{m.value=e.data}));const r=(0,o.iH)([]);u.Z.hallInfo.getAllList().then((e=>{r.value=e.data}));const v=(0,o.iH)(!1),h=()=>{v.value=!0,u.Z.planInfo.getListByPage(l).then((e=>{a.listData=e.data.listData,a.totalCount=e.data.totalCount,a.pageCount=e.data.pageCount})).finally((()=>{v.value=!1}))};h();const b=e=>{l.pageIndex=e,h()},W=e=>{u.Z.planInfo.deleteById(e.id).then((e=>{d.z8.success("删除成功"),h()}))};return(e,u)=>{const d=(0,t.up)("el-input"),C=(0,t.up)("el-form-item"),k=(0,t.up)("el-option"),I=(0,t.up)("el-select"),U=(0,t.up)("el-button"),y=(0,t.up)("el-form"),D=(0,t.up)("el-table-column"),x=(0,t.up)("el-popconfirm"),z=(0,t.up)("el-table"),V=(0,t.up)("el-pagination"),Y=(0,t.up)("el-card"),H=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.j4)(Y,{header:"排片列表"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{inline:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{label:"影片名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{placeholder:"影片名称",modelValue:l.movie_name,"onUpdate:modelValue":u[0]||(u[0]=e=>l.movie_name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(C,{label:"电影"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{modelValue:l.mid,"onUpdate:modelValue":u[1]||(u[1]=e=>l.mid=e),placeholder:"请选择电影",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.value,(e=>((0,t.wg)(),(0,t.j4)(k,{key:e.id,value:e.id,label:e.movie_name},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.movie_name)+"【"+(0,n.zw)(e.movie_score)+"分】 ",1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(C,{label:"影厅"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{modelValue:l.hid,"onUpdate:modelValue":u[2]||(u[2]=e=>l.hid=e),placeholder:"请选择影厅",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.value,(e=>((0,t.wg)(),(0,t.j4)(k,{key:e.id,value:e.id,label:e.hall_name},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.hall_name),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{type:"primary",icon:(0,o.SU)(i.olm),loading:v.value,onClick:u[3]||(u[3]=e=>{l.pageIndex=1,h()})},{default:(0,t.w5)((()=>[f])),_:1},8,["icon","loading"]),(0,t.Wm)(U,{type:"default",icon:(0,o.SU)(i.Gq5),onClick:u[4]||(u[4]=l=>e.$router.push({name:"AddPlanInfo"}))},{default:(0,t.w5)((()=>[w])),_:1},8,["icon"])])),_:1})])),_:1}),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(z,{data:a.listData,stripe:"",border:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{label:"ID",prop:"id",width:"60",align:"center"}),(0,t.Wm)(D,{label:"时间",width:"180",align:"center"},{default:(0,t.w5)((({row:e})=>[(0,t.Uk)((0,n.zw)((0,o.SU)(p)(e.plan_time,"YYYY-MM-DD HH:mm:ss")),1)])),_:1}),(0,t.Wm)(D,{label:"电影名称",prop:"movieInfo.movie_name","min-width":"120"}),(0,t.Wm)(D,{label:"影厅名称",prop:"hallInfo.hall_name",width:"180"}),(0,t.Wm)(D,{label:"价格",prop:"price",align:"center",width:"90"}),(0,t.Wm)(D,{label:"操作",width:"150",align:"center"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(U,{type:"warning",size:"small"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(x,{title:"你确定要删除吗?",onConfirm:l=>W(e)},{reference:(0,t.w5)((()=>[(0,t.Wm)(U,{type:"danger",size:"small"},{default:(0,t.w5)((()=>[g])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",_,[(0,t._)("div",null,"当前第"+(0,n.zw)(l.pageIndex)+"页，共"+(0,n.zw)(a.pageCount)+"页，共"+(0,n.zw)(a.totalColunt)+"条",1),(0,t.Wm)(V,{background:"",layout:"prev,pager,next",total:a.totalCount,onCurrentChange:b,"current-page":l.pageIndex},null,8,["total","current-page"])])])),[[H,v.value]])])),_:1})}}};const h=v;var b=h}}]);
//# sourceMappingURL=495.37ea8952.js.map