{"version":3,"file":"js/495.37ea8952.js","mappings":"wPAEO,MAAMA,EAAiB,CAACC,EAAKC,EAAQ,gBACxC,MAAMC,EAAIC,IAAMH,GAChB,OAAIE,EAAEE,UACKF,EAAEG,OAAOJ,GAET,I,oNCiECK,EAAAA,EAAAA,IAAO,WAAvB,MACMC,GAAcC,EAAAA,EAAAA,IAAS,CAC3BC,IAAK,GACLC,IAAK,GACLC,WAAY,GACZC,SAAU,GACVC,UAAW,IAGPC,GAAWN,EAAAA,EAAAA,IAAS,CACxBO,SAAU,GACVC,WAAY,EACZC,UAAW,IAIPC,GAAmBC,EAAAA,EAAAA,IAAI,IAC7BC,EAAAA,EAAAA,UAAAA,aAA2BC,MAAMC,IAC/BJ,EAAiBK,MAAQD,EAAOE,QAIlC,MAAMC,GAAkBN,EAAAA,EAAAA,IAAI,IAC5BC,EAAAA,EAAAA,SAAAA,aAA0BC,MAAMC,IAC9BG,EAAgBF,MAAQD,EAAOE,QAGjC,MAAME,GAAYP,EAAAA,EAAAA,KAAI,GAChBQ,EAAc,KAClBD,EAAUH,OAAQ,EAClBH,EAAAA,EAAAA,SAAAA,cACiBb,GACdc,MAAMC,IACLR,EAASC,SAAWO,EAAOE,KAAKT,SAChCD,EAASE,WAAaM,EAAOE,KAAKR,WAClCF,EAASG,UAAYK,EAAOE,KAAKP,aAElCW,SAAQ,KACPF,EAAUH,OAAQ,MAIxBI,IAEA,MAAME,EAAqBC,IACzBvB,EAAYM,UAAYiB,EACxBH,KAGII,EAAoBC,IACxBZ,EAAAA,EAAAA,SAAAA,WAAwBY,EAAIC,IAAIZ,MAAMC,IACpCY,EAAAA,GAAAA,QAAkB,QAClBP,Q,yiGCzHJ,MAAMQ,EAAc,EAEpB","sources":["webpack://movie-manager/./src/utils/dateTimeUtils.js","webpack://movie-manager/./src/views/planInfo/PlanInfoList.vue","webpack://movie-manager/./src/views/planInfo/PlanInfoList.vue?4dac"],"sourcesContent":["import dayjs from \"dayjs\";\r\n\r\nexport const formatDateTime = (str, split = \"YYYY-MM-DD\") => {\r\n    const d = dayjs(str);\r\n    if (d.isValid()) {\r\n        return d.format(split)\r\n    } else {\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport const getTotalDaysByMonth = (year, month) => {\r\n    let days = [31, 28, 31, 30, 31, 30, 31, 30, 30, 31, 30, 31]\r\n    if ((year % 4 === 0) && (year % 100 !== 0 || year % 400 === 0)) {\r\n        days[1] = 29\r\n    }\r\n    return days[month - 1]\r\n};","<template>\r\n  <el-card header=\"排片列表\">\r\n    <el-form :inline=\"true\">\r\n      <el-form-item label=\"影片名称\">\r\n        <el-input placeholder=\"影片名称\" v-model=\"queryParams.movie_name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"电影\">\r\n        <el-select v-model=\"queryParams.mid\" placeholder=\"请选择电影\" filterable>\r\n          <el-option v-for=\"item in allMovieInfoList\"\r\n            :key=\"item.id\" :value=\"item.id\"\r\n            :label=\"item.movie_name\">\r\n            {{item.movie_name}}【{{item.movie_score}}分】\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"影厅\">\r\n        <el-select v-model=\"queryParams.hid\" placeholder=\"请选择影厅\" filterable>\r\n          <el-option v-for=\"item in allHallInfoList\" :key=\"item.id\" :value=\"item.id\" :label=\"item.hall_name\">\r\n            {{item.hall_name}}\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :icon=\"Search\" :loading=\"isLoading\" @click=\"queryParams.pageIndex=1;getPageList()\">查询</el-button>\r\n        <el-button type=\"default\" :icon=\"CirclePlus\" @click=\"$router.push({name:'AddPlanInfo'})\">新增电影排片</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 给一个表格 -->\r\n    <div v-loading=\"isLoading\" element-loading-text=\"正在加载数据\">\r\n      <el-table :data=\"pageList.listData\" stripe border>\r\n        <el-table-column label=\"ID\" prop=\"id\" width=\"60\" align=\"center\"></el-table-column>\r\n        <el-table-column label=\"时间\" width=\"180\" align=\"center\">\r\n          <template #default=\"{row}\">\r\n            {{formatDateTime(row.plan_time,\"YYYY-MM-DD HH:mm:ss\")}}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"电影名称\" prop=\"movieInfo.movie_name\" min-width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column label=\"影厅名称\" prop=\"hallInfo.hall_name\" width=\"180\"> </el-table-column>\r\n        <el-table-column label=\"价格\" prop=\"price\" align=\"center\" width=\"90\"></el-table-column>\r\n        <!-- 如果在表单里某一列想显示自定义内容，可以使用下面的方法 -->\r\n        <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n          <template #default=\"{row}\">\r\n            <el-button type=\"warning\" size=\"small\">编辑</el-button>\r\n            <el-popconfirm title=\"你确定要删除吗?\" @confirm=\"deleteCurrentRow(row)\">\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"small\">删除</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <div class=\" flex flex-row justify-between items-center mt-[10px]\">\r\n        <div>当前第{{queryParams.pageIndex}}页，共{{pageList.pageCount}}页，共{{pageList.totalColunt}}条</div>\r\n        <el-pagination\r\n          background\r\n          layout=\"prev,pager,next\"\r\n          :total=\"pageList.totalCount\"\r\n          @current-change=\"currentPageChange\"\r\n          :current-page=\"queryParams.pageIndex\"></el-pagination>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, inject } from \"vue\";\r\nimport { Search, CirclePlus } from \"@element-plus/icons-vue\";\r\nimport API from \"@/utils/API\";\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport { formatDateTime } from \"@/utils/dateTimeUtils\";\r\n\r\nconst baseURL = inject(\"baseURL\");\r\nconst queryParams = reactive({\r\n  mid: \"\",\r\n  hid: \"\",\r\n  start_time: \"\",\r\n  end_time: \"\",\r\n  pageIndex: 1,\r\n});\r\n\r\nconst pageList = reactive({\r\n  listData: [],\r\n  totalCount: 0,\r\n  pageCount: 0,\r\n});\r\n\r\n//所有电影\r\nconst allMovieInfoList = ref([]);\r\nAPI.movieInfo.getAllList().then((result) => {\r\n  allMovieInfoList.value = result.data;\r\n});\r\n\r\n//所有影厅\r\nconst allHallInfoList = ref([]);\r\nAPI.hallInfo.getAllList().then((result) => {\r\n  allHallInfoList.value = result.data;\r\n});\r\n\r\nconst isLoading = ref(false);\r\nconst getPageList = () => {\r\n  isLoading.value = true;\r\n  API.planInfo\r\n    .getListByPage(queryParams)\r\n    .then((result) => {\r\n      pageList.listData = result.data.listData;\r\n      pageList.totalCount = result.data.totalCount;\r\n      pageList.pageCount = result.data.pageCount;\r\n    })\r\n    .finally(() => {\r\n      isLoading.value = false;\r\n    });\r\n};\r\n\r\ngetPageList();\r\n\r\nconst currentPageChange = (page) => {\r\n  queryParams.pageIndex = page;\r\n  getPageList();\r\n};\r\n\r\nconst deleteCurrentRow = (row) => {\r\n  API.planInfo.deleteById(row.id).then((result) => {\r\n    ElMessage.success(\"删除成功\");\r\n    getPageList();\r\n  });\r\n};\r\n</script>\r\n<style scoped>\r\n</style>","import script from \"./PlanInfoList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PlanInfoList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["formatDateTime","str","split","d","dayjs","isValid","format","inject","queryParams","reactive","mid","hid","start_time","end_time","pageIndex","pageList","listData","totalCount","pageCount","allMovieInfoList","ref","API","then","result","value","data","allHallInfoList","isLoading","getPageList","finally","currentPageChange","page","deleteCurrentRow","row","id","ElMessage","__exports__"],"sourceRoot":""}