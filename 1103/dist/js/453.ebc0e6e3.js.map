{"version":3,"file":"js/453.ebc0e6e3.js","mappings":"yaAuDA,MAAMA,GAAcC,EAAAA,EAAAA,IAAS,CAC3BC,UAAW,GACXC,UAAW,IAGPC,GAAWH,EAAAA,EAAAA,IAAS,CACxBI,SAAU,GACVC,WAAY,EACZC,UAAW,IAGPC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,EAAc,KAClBF,EAAUG,OAAQ,EAClBC,EAAAA,EAAAA,SAAAA,cACiBZ,GACda,MAAMC,IACLV,EAASC,SAAWS,EAAOC,KAAKV,SAChCD,EAASE,WAAaQ,EAAOC,KAAKT,WAClCF,EAASG,UAAYO,EAAOC,KAAKR,aAElCS,SAAQ,KACPR,EAAUG,OAAQ,MAIxBD,IAEA,MAAMO,EAAoBC,IACxBN,EAAAA,EAAAA,SAAAA,WAAwBM,EAAIC,IAAIN,MAAMC,IACpCM,EAAAA,GAAAA,QAAkB,QAClBV,QAIEW,EAAqBC,IACzBtB,EAAYG,UAAYmB,EACxBZ,KAIIa,EAAgBC,IACpB,IACE,IAAIC,EAAMC,KAAKC,MAAMH,GACrB,OAAOC,EAAIG,KAAKC,KAAUC,QAAQC,GAAiB,GAARA,IAAWC,OACtD,MAAOC,GACP,OAAO,I,gtEClGX,MAAMC,EAAc,EAEpB","sources":["webpack://movie-manager/./src/views/hallInfo/HallInfoList.vue","webpack://movie-manager/./src/views/hallInfo/HallInfoList.vue?e9e6"],"sourcesContent":["<template>\r\n  <el-card header=\"影厅列表\">\r\n    <el-form :model=\"queryParams\" :inline=\"true\">\r\n      <el-form-item label=\"影厅名称\">\r\n        <el-input placeholder=\"请输入影厅名称\" v-model=\"queryParams.hall_name\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :icon=\"Search\" @click=\"queryParams.pageIndex =1;getPageList()\">查询</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div v-loading=\"isLoading\" element-loading-text=\"正在加载数据\">\r\n      <el-table :data=\"pageList.listData\" stripe border>\r\n        <el-table-column label=\"ID\" prop=\"id\" width=\"60\" align=\"center\"></el-table-column>\r\n        <el-table-column label=\"影厅名称\" prop=\"hall_name\" width=\"150\"></el-table-column>\r\n        <el-table-column label=\"电影标签\" min-width=\"150\">\r\n          <template #default=\"{row}\">\r\n            <el-tag :type=\"index%2==0?'':'danger'\" class=\"ml-2\" v-for=\"(item,index) in row.tags.split(',')\" :key=\"item\">{{item}}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"总坐位数\">\r\n          <template #default=\"{row}\">\r\n            {{getSiteCount(row.sites)}}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"地址\" prop=\"address\" min-width=\"80\"></el-table-column>\r\n        <!-- 如果在表单里某一列想显示自定义内容，可以使用下面的方法 -->\r\n        <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n          <template #default=\"{row}\">\r\n            <el-button type=\"warning\" size=\"small\" @click=\"$router.push({name:'EditHallInfo',params:{id:row.id}})\">编辑</el-button>\r\n            <el-popconfirm title=\"你确定要删除吗?\" @confirm=\"deleteCurrentRow(row)\">\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"small\">删除</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <div class=\" flex flex-row justify-between items-center mt-[10px]\">\r\n        <div>当前第{{queryParams.pageIndex}}页，共{{pageList.pageCount}}页，共{{pageList.totalColunt}}条</div>\r\n        <el-pagination\r\n          background\r\n          layout=\"prev,pager,next\"\r\n          :total=\"pageList.totalCount\"\r\n          @current-change=\"currentPageChange\"\r\n          :current-page=\"queryParams.pageIndex\"></el-pagination>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive } from \"vue\";\r\nimport { CirclePlus, Search } from \"@element-plus/icons-vue\";\r\nimport API from \"@/utils/API\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst queryParams = reactive({\r\n  hall_name: \"\",\r\n  pageIndex: 1,\r\n});\r\n\r\nconst pageList = reactive({\r\n  listData: [],\r\n  totalCount: 0,\r\n  pageCount: 0,\r\n});\r\n\r\nconst isLoading = ref(false);\r\nconst getPageList = () => {\r\n  isLoading.value = true;\r\n  API.hallInfo\r\n    .getListByPage(queryParams)\r\n    .then((result) => {\r\n      pageList.listData = result.data.listData;\r\n      pageList.totalCount = result.data.totalCount;\r\n      pageList.pageCount = result.data.pageCount;\r\n    })\r\n    .finally(() => {\r\n      isLoading.value = false;\r\n    });\r\n};\r\n\r\ngetPageList();\r\n\r\nconst deleteCurrentRow = (row) => {\r\n  API.hallInfo.deleteById(row.id).then((result) => {\r\n    ElMessage.success(\"删除成功\");\r\n    getPageList();\r\n  });\r\n};\r\n\r\nconst currentPageChange = (page) => {\r\n  queryParams.pageIndex = page;\r\n  getPageList();\r\n};\r\n\r\n//获取所有坐位\r\nconst getSiteCount = (arrStr) => {\r\n  try {\r\n    let arr = JSON.parse(arrStr);\r\n    return arr.flat(Infinity).filter((item) => item == 0).length;\r\n  } catch (error) {\r\n    return 0;\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n</style>","import script from \"./HallInfoList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HallInfoList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["queryParams","reactive","hall_name","pageIndex","pageList","listData","totalCount","pageCount","isLoading","ref","getPageList","value","API","then","result","data","finally","deleteCurrentRow","row","id","ElMessage","currentPageChange","page","getSiteCount","arrStr","arr","JSON","parse","flat","Infinity","filter","item","length","error","__exports__"],"sourceRoot":""}