"use strict";(self["webpackChunkmovie_manager"]=self["webpackChunkmovie_manager"]||[]).push([[679],{1679:function(e,l,a){a.r(l),a.d(l,{default:function(){return q}});var t=a(3396),r=a(4870),s=a(9242),u=a(7139),n=a(250),o=a(2748),d=a(5499),i=a(2807),p=a(946),m=a(678);const c=e=>((0,t.dD)("data-v-630d4a90"),e=e(),(0,t.Cn)(),e),f={class:"flex flex-row justify-between"},g=c((()=>(0,t._)("span",null,"新增影厅",-1))),w=(0,t.Uk)("返回列表"),v={class:"w-full mt-[-5px]"},_=(0,t.Uk)("添加一行"),A=(0,t.Uk)("复制一行"),x=c((()=>(0,t._)("img",{src:n,alt:""},null,-1))),h=[x],k=c((()=>(0,t._)("span",{class:"ml-[5px]"},"可选",-1))),W=c((()=>(0,t._)("span",{class:"ml-[5px]"},"空位",-1))),b={class:"site-list"},y=["onDrop"],C={key:0,src:n},U=(0,t.Uk)("保存数据"),D=(0,t.Uk)("重置表单");var V={__name:"AddHallInfo",setup(e){const l=(0,m.tv)(),a=(0,r.qj)({hall_name:"",tags:[],sites:"",address:""}),n=(0,r.iH)([]);(0,t.YP)((()=>n),((e,l)=>{a.sites=JSON.stringify(n.value)}),{deep:!0});const c={hall_name:[{required:!0,message:"请输入影厅名称",trigger:"blur"}],tags:[{required:!0,message:"请输入影厅标签",trigger:"blur"}],sites:[{required:!0,message:"请设计影厅座位",trigger:"blur"}],address:[{required:!0,message:"请输入影厅地址",trigger:"blur"}]},x=(0,r.iH)(null),V=()=>{n.value.push([])},I=e=>{d.T.confirm("确定要删除这一行吗？","请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n.value.splice(e,1)}))},H=()=>{if(n.value.length>0){const e=n.value[n.value.length-1];n.value.push([...e])}else i.z8.error("请先添加一行")},q=(e,l)=>{e.dataTransfer.setData("site",l)},Q=(e,l)=>{var a=e.dataTransfer.getData("site");n.value[l].push(+a)},B=()=>{x.value.validate((e=>{e?T():i.z8.error("请将数据填写完整")}))},K=(0,r.iH)(!1),T=()=>{K.value=!0,p.Z.hallInfo.add({...a,tags:a.tags.join(",")}).then((e=>{i.z8.success("数据保存成功"),l.replace({name:"HallInfoList"})})).finally((()=>{K.value=!1}))},z=()=>{x.value.resetFields(),a.sites="",n.value=[]};return(e,l)=>{const d=(0,t.up)("router-link"),i=(0,t.up)("el-input"),p=(0,t.up)("el-form-item"),m=(0,t.up)("el-option"),T=(0,t.up)("el-select"),X=(0,t.up)("el-button"),Z=(0,t.up)("el-button-group"),E=(0,t.up)("el-col"),G=(0,t.up)("el-row"),J=(0,t.up)("el-icon"),O=(0,t.up)("el-form"),j=(0,t.up)("el-card");return(0,t.wg)(),(0,t.j4)(j,null,{header:(0,t.w5)((()=>[(0,t._)("div",f,[g,(0,t.Wm)(d,{class:"text-blue-500",to:{name:"MovieInfoList"}},{default:(0,t.w5)((()=>[w])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(O,{model:a,rules:c,"label-width":"120px",ref_key:"formEl",ref:x},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"影厅名称",prop:"hall_name"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{placeholder:"请输入影厅名称",modelValue:a.hall_name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.hall_name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"影厅标签",prop:"tags"},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{multiple:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"请选择影厅标签",modelValue:a.tags,"onUpdate:modelValue":l[1]||(l[1]=e=>a.tags=e),class:"w-full"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(["退","改签","折扣卡","4K厅","全景声","IMAX厅","小吃","杜比全景声"],(e=>(0,t.Wm)(m,{label:e,value:e,key:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"影厅地址",prop:"address"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{placeholder:"影厅地址",modelValue:a.address,"onUpdate:modelValue":l[2]||(l[2]=e=>a.address=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"影厅坐位",prop:"sites"},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.Wm)(Z,{class:"my-[10px]"},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{type:"info",onClick:V,icon:(0,r.SU)(o.Gq5)},{default:(0,t.w5)((()=>[_])),_:1},8,["icon"]),(0,t.Wm)(X,{type:"success",onClick:H,icon:(0,r.SU)(o.IBc)},{default:(0,t.w5)((()=>[A])),_:1},8,["icon"])])),_:1}),(0,t.Wm)(G,{class:"mt-[10px]"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{span:12,class:"flex flex-row text-[14px] items-center"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"w-[30px] h-[26px]",draggable:"true","data-site":"0",onDragstart:l[3]||(l[3]=e=>q(e,0))},h,32),k])),_:1}),(0,t.Wm)(E,{span:12,class:"flex flex-row text-[14px] items-center"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"w-[30px] h-[26px] border border-dashed border-gray-500","data-site":"-1",draggable:"true",onDragstart:l[4]||(l[4]=e=>q(e,-1))},null,32),W])),_:1})])),_:1}),(0,t._)("ul",b,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.value,((e,a)=>((0,t.wg)(),(0,t.iD)("li",{onDragend:l[5]||(l[5]=(0,s.iM)((()=>{}),["prevent"])),onDragover:l[6]||(l[6]=(0,s.iM)((()=>{}),["prevent"])),onDrop:(0,s.iM)((e=>Q(e,a)),["prevent"]),key:a},[(0,t.Wm)(J,{color:"red",size:22,class:"absolute right-[10px] cursor-pointer",onClick:e=>I(a)},{default:(0,t.w5)((()=>[(0,t.Wm)((0,r.SU)(o.Tw$))])),_:2},1032,["onClick"]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:(0,u.C_)(["mr-[5px] w-[30px] h-[26px] border border-gray-500",{"border-dashed":-1==e}]),key:l},[0==e?((0,t.wg)(),(0,t.iD)("img",C)):(0,t.kq)("",!0)],2)))),128))],40,y)))),128))])])])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(X,{type:"primary",onClick:B,loading:K.value},{default:(0,t.w5)((()=>[U])),_:1},8,["loading"]),(0,t.Wm)(X,{type:"danger",onClick:z},{default:(0,t.w5)((()=>[D])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}},I=a(89);const H=(0,I.Z)(V,[["__scopeId","data-v-630d4a90"]]);var q=H},250:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAAAXNSR0IArs4c6QAAAY9JREFUSA3tVs1qg0AQ3l1/i5eCFC8+QSC0+BQ999QeC32t9lLovac8RQwk6BOUXLzVitFE0/mEDVIiJsbkUgeM7jjzfd/OjpvlrGZhGL6uVqvnsix5zX3yoxBia5rm22g0etkL5vt+WRTFtm8DJrDrpKI+wExJXd3VyzMw/1axf5YDpe6IqRSPUJZlGdQdmN4eBixgAps4nmRGRUyOCTneXddlnHOWJEkv5CAFFjCBTeOP2Wz2CXI+nU7vqZkmnudVAXBuNptKpWVZGHa2OI4ZdTPTNK3CIB42n89TarYHQWpuHcfJoEqaqqqViFNKDhKUV5ICGxy2bQt6d4cfU1EUQ5LKO4KQ3NWQW5+MxAEXCbraNZd8can7QHypSrOh1EOpz1YBtQkZOw+2zK67V1teI7FhGGy9XjfpavWDWNf1xrhGYtpTGa5z2f/6jmkZFPwff0VR1H0xj1yL5XKJhv3hQRDoaZriILClKz8S5+hwIk3ptHNTHTtowBeLxXWe5/2d8vZIoi4X4/H4myZY/AJMWAAq2pF/7QAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=679.7debad68.js.map