"use strict";(self["webpackChunkmovie_manager"]=self["webpackChunkmovie_manager"]||[]).push([[639],{5639:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var u=a(3396),t=a(7139),i=a(946),r=a(2807),d=a(5499),o=a(4870);const s={class:"flex flex-row justify-between"},m=(0,u._)("span",null,"新增电影排片",-1),n=(0,u.Uk)("返回列表"),p=(0,u.Uk)("保存数据"),c=(0,u.Uk)("重置表单");var f={__name:"AddPlanInfo",setup(e){const l=(0,o.qj)({plan_time:"",hid:"",mid:"",price:"",choose_site:""}),a={plan_time:[{required:!0,message:"请选择排片时间",trigger:"blur"}],hid:[{required:!0,message:"请选择影厅",trigger:"blur"}],mid:[{required:!0,message:"请选择电影",trigger:"blur"}],price:[{required:!0,message:"请输入排片价格",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"请输入正确的价格",trigger:"blur"}],choose_site:[{required:!0,message:"请选择排片场次",trigger:"blur"}]},f=(0,o.iH)(null),_=(0,o.iH)([]);i.Z.movieInfo.getAllList().then((e=>_.value=e.data)),(0,u.YP)((()=>l.hid),(e=>{e&&(l.choose_site=w.value.find((l=>l.id==e)).sites)}));const w=(0,o.iH)([]);i.Z.hallInfo.getAllList().then((e=>w.value=e.data));const g=()=>{f.value.validate((e=>{e?v():r.z8.error("请将表单信息输入完整")}))},h=(0,o.iH)(!1),v=()=>{h.value=!0,i.Z.planInfo.add(l).then((e=>{d.T.alert("添加成功","提示",{type:"success",callback:()=>{f.value.resetFields(),l.choose_site=""}})})).finally((()=>{h.value=!1}))},b=()=>{f.value.resetFields(),l.choose_site=""};return(e,i)=>{const r=(0,u.up)("router-link"),d=(0,u.up)("el-date-picker"),o=(0,u.up)("el-form-item"),h=(0,u.up)("el-option"),v=(0,u.up)("el-select"),k=(0,u.up)("el-input"),W=(0,u.up)("el-button"),V=(0,u.up)("el-form"),y=(0,u.up)("el-card");return(0,u.wg)(),(0,u.j4)(y,null,{header:(0,u.w5)((()=>[(0,u._)("div",s,[m,(0,u.Wm)(r,{class:"text-blue-500",to:{name:"PlanInfoList"}},{default:(0,u.w5)((()=>[n])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(V,{"label-width":"120px",model:l,rules:a,ref_key:"formEl",ref:f},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{label:"排片时间",prop:"plan_time",class:"w-full"},{default:(0,u.w5)((()=>[(0,u.Wm)(d,{modelValue:l.plan_time,"onUpdate:modelValue":i[0]||(i[0]=e=>l.plan_time=e),type:"datetime",placeholder:"请选择排片时间","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(o,{label:"电影",prop:"mid",class:"w-full"},{default:(0,u.w5)((()=>[(0,u.Wm)(v,{modelValue:l.mid,"onUpdate:modelValue":i[1]||(i[1]=e=>l.mid=e),placeholder:"请选择电影",class:"w-full",filterable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(_.value,(e=>((0,u.wg)(),(0,u.j4)(h,{key:e.id,value:e.id,label:e.movie_name},{default:(0,u.w5)((()=>[(0,u.Uk)((0,t.zw)(e.movie_name)+"【"+(0,t.zw)(e.publicTime)+"】【"+(0,t.zw)(e.movie_score)+"分】 ",1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(o,{label:"影厅",prop:"hid",class:"w-full"},{default:(0,u.w5)((()=>[(0,u.Wm)(v,{modelValue:l.hid,"onUpdate:modelValue":i[2]||(i[2]=e=>l.hid=e),placeholder:"请选择影厅",class:"w-full",filterable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(w.value,(e=>((0,u.wg)(),(0,u.j4)(h,{key:e.id,value:e.id,label:e.hall_name},{default:(0,u.w5)((()=>[(0,u.Uk)((0,t.zw)(e.hall_name),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(o,{label:"价格",prop:"price"},{default:(0,u.w5)((()=>[(0,u.Wm)(k,{placeholder:"请输入价格",modelValue:l.price,"onUpdate:modelValue":i[3]||(i[3]=e=>l.price=e)},null,8,["modelValue"])])),_:1}),(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[(0,u.Wm)(W,{type:"primary",onClick:g},{default:(0,u.w5)((()=>[p])),_:1}),(0,u.Wm)(W,{type:"danger",onClick:b},{default:(0,u.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}}};const _=f;var w=_}}]);
//# sourceMappingURL=639.2ebc2f12.js.map