{"version":3,"file":"js/713.5b98c63d.js","mappings":"6bA4EA,MAAMA,GAAUC,EAAAA,EAAAA,IAAO,WACjBC,GAAcC,EAAAA,EAAAA,IAAS,CAC3BC,WAAY,GACZC,KAAM,GACNC,UAAW,IAGPC,GAAWJ,EAAAA,EAAAA,IAAS,CACxBK,SAAU,GACVC,WAAY,EACZC,UAAW,IAGPC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,EAAc,KAClBF,EAAUG,OAAQ,EAClBC,EAAAA,EAAAA,UAAAA,cACiB,IAAKb,EAAaG,KAAMH,EAAYG,KAAKW,KAAK,OAC5DC,MAAMC,IACLX,EAASC,SAAWU,EAAOC,KAAKX,SAChCD,EAASE,WAAaS,EAAOC,KAAKV,WAClCF,EAASG,UAAYQ,EAAOC,KAAKT,aAElCU,SAAQ,KACPT,EAAUG,OAAQ,MAIxBD,IAEA,MAAMQ,EAAqBC,IACzBpB,EAAYI,UAAYgB,EACxBT,KAGIU,EAAoBC,IACxBT,EAAAA,EAAAA,UAAAA,WAAyBS,EAAIC,IAAIR,MAAMC,IACrCQ,EAAAA,GAAAA,QAAkB,QAClBb,Q,6yFC/GJ,MAAMc,EAAc,EAEpB","sources":["webpack://movie-manager/./src/views/movieInfo/MovieInfoList.vue","webpack://movie-manager/./src/views/movieInfo/MovieInfoList.vue?46aa"],"sourcesContent":["<template>\r\n  <el-card header=\"影片列表\">\r\n    <el-form :inline=\"true\">\r\n      <el-form-item label=\"影片名称\">\r\n        <el-input placeholder=\"影片名称\" v-model=\"queryParams.movie_name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"影片标签\">\r\n        <el-select\r\n          v-model=\"queryParams.tags\"\r\n          multiple\r\n          filterable\r\n          allow-create\r\n          default-first-option\r\n          :reserve-keyword=\"false\"\r\n          placeholder=\"输入标签\">\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :icon=\"Search\" :loading=\"isLoading\" @click=\"queryParams.pageIndex=1;getPageList()\">查询</el-button>\r\n        <el-button type=\"default\" :icon=\"CirclePlus\" @click=\"$router.push({name:'AddMovieInfo'})\">新增影片</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 给一个表格 -->\r\n    <div v-loading=\"isLoading\" element-loading-text=\"正在加载数据\">\r\n\r\n      <el-table :data=\"pageList.listData\" stripe border>\r\n        <el-table-column label=\"ID\" prop=\"id\" width=\"60\" align=\"center\"></el-table-column>\r\n        <el-table-column label=\"电影名称\" prop=\"movie_name\" width=\"150\"></el-table-column>\r\n        <el-table-column label=\"电影海报\" width=\"150\" min-width=\"80\" align=\"center\">\r\n          <template #default=\"{row}\">\r\n            <el-image\r\n              style=\"width: 50px; height: 50px;\"\r\n              :src=\"baseURL+row.movie_pc\"\r\n              :preview-src-list=\"[baseURL+row.movie_pc]\"\r\n              fit=\"cover\"\r\n              :z-index=\"9999\"\r\n              :preview-teleported=\"true\">\r\n            </el-image>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"时长\" prop=\"duration\" align=\"center\" width=\"100\"> </el-table-column>\r\n        <el-table-column label=\"上映时间\" prop=\"publicTime\" align=\"center\" width=\"120\"></el-table-column>\r\n        <el-table-column label=\"电影标签\" prop=\"tags\"></el-table-column>\r\n        <el-table-column label=\"演员\" prop=\"role\"></el-table-column>\r\n        <el-table-column label=\"评分\" prop=\"movie_score\" width=\"80\" align=\"center\"></el-table-column>\r\n        <!-- 如果在表单里某一列想显示自定义内容，可以使用下面的方法 -->\r\n        <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n          <template #default=\"{row}\">\r\n            <el-button type=\"warning\" size=\"small\" @click=\"$router.push({name:'EditMovieInfo',params:{id:row.id}})\">编辑</el-button>\r\n            <el-popconfirm title=\"你确定要删除吗?\" @confirm=\"deleteCurrentRow(row)\">\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"small\">删除</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <div class=\" flex flex-row justify-between items-center mt-[10px]\">\r\n        <div>当前第{{queryParams.pageIndex}}页，共{{pageList.pageCount}}页，共{{pageList.totalColunt}}条</div>\r\n        <el-pagination\r\n          background\r\n          layout=\"prev,pager,next\"\r\n          :total=\"pageList.totalCount\"\r\n          @current-change=\"currentPageChange\"\r\n          :current-page=\"queryParams.pageIndex\"></el-pagination>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, inject } from \"vue\";\r\nimport { Search, CirclePlus } from \"@element-plus/icons-vue\";\r\nimport API from \"@/utils/API\";\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\n\r\nconst baseURL = inject(\"baseURL\");\r\nconst queryParams = reactive({\r\n  movie_name: \"\",\r\n  tags: [],\r\n  pageIndex: 1,\r\n});\r\n\r\nconst pageList = reactive({\r\n  listData: [],\r\n  totalCount: 0,\r\n  pageCount: 0,\r\n});\r\n\r\nconst isLoading = ref(false);\r\nconst getPageList = () => {\r\n  isLoading.value = true;\r\n  API.movieInfo\r\n    .getListByPage({ ...queryParams, tags: queryParams.tags.join(\" \") })\r\n    .then((result) => {\r\n      pageList.listData = result.data.listData;\r\n      pageList.totalCount = result.data.totalCount;\r\n      pageList.pageCount = result.data.pageCount;\r\n    })\r\n    .finally(() => {\r\n      isLoading.value = false;\r\n    });\r\n};\r\n\r\ngetPageList();\r\n\r\nconst currentPageChange = (page) => {\r\n  queryParams.pageIndex = page;\r\n  getPageList();\r\n};\r\n\r\nconst deleteCurrentRow = (row) => {\r\n  API.movieInfo.deleteById(row.id).then((result) => {\r\n    ElMessage.success(\"删除成功\");\r\n    getPageList();\r\n  });\r\n};\r\n</script>\r\n<style scoped>\r\n</style>","import script from \"./MovieInfoList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MovieInfoList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["baseURL","inject","queryParams","reactive","movie_name","tags","pageIndex","pageList","listData","totalCount","pageCount","isLoading","ref","getPageList","value","API","join","then","result","data","finally","currentPageChange","page","deleteCurrentRow","row","id","ElMessage","__exports__"],"sourceRoot":""}